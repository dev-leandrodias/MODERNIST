{"cells":[{"cell_type":"markdown","metadata":{"id":"EKOTlwcmxmej"},"source":["# Selecionando sentenças dos originais\n","\n","Realiza a seleção de sentenças que possuem as palavras chaves os arquivos:\n","\n","- `original.zip`\n","- `originalpos.zip`\n","\n","Gera o arquivo:\n","\n","- `original_filtrado.zip`"]},{"cell_type":"markdown","metadata":{"id":"OP33KWAtBMWs"},"source":["# 1 Preparação do ambiente\n","\n","Preparação do ambiente para execução do script."]},{"cell_type":"markdown","metadata":{"id":"PKUr9Vk4BNLC"},"source":["## 1.1 Tempo inicial de processamento"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"JXclHCRQBSF2"},"outputs":[],"source":["# Import das bibliotecas.\n","import time\n","import datetime\n","\n","# Marca o tempo de início do processamento\n","inicio_processamento = time.time()"]},{"cell_type":"markdown","metadata":{"id":"GOcN8hK-scnt"},"source":["## 1.2 Funções e classes auxiliares"]},{"cell_type":"markdown","metadata":{"id":"OPRnA-mk5-c4"},"source":["Verifica se existe o diretório cohebert no diretório corrente.   \n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Fj5TaAH_5-nB"},"outputs":[],"source":["# Import das bibliotecas.\n","import os # Biblioteca para manipular arquivos\n","\n","# ============================  \n","def verificaDiretorioCoheBERT():\n","    \"\"\"\n","      Verifica se existe o diretório cohebert no diretório corrente.    \n","    \"\"\"\n","    \n","    # Verifica se o diretório existe\n","    if not os.path.exists(DIRETORIO_COHEBERT):  \n","        # Cria o diretório\n","        os.makedirs(DIRETORIO_COHEBERT)\n","        logging.info(\"Diretório Cohebert criado: {}\".format(DIRETORIO_COHEBERT))\n","    \n","    return DIRETORIO_COHEBERT"]},{"cell_type":"markdown","metadata":{"id":"yDCOeh2y5jOH"},"source":["Realiza o download e um arquivo"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"5B1mvfAU5jZf"},"outputs":[],"source":["# Import das bibliotecas.\n","import requests # Biblioteca de download\n","from tqdm.notebook import tqdm as tqdm_notebook # Biblioteca para barra de progresso\n","import os # Biblioteca para manipular arquivos\n","\n","def downloadArquivo(url_arquivo, nome_arquivo_destino):\n","    \"\"\"    \n","      Realiza o download de um arquivo de uma url em salva em nome_arquivo_destino.\n","    \n","      Parâmetros:\n","        `url_arquivo` - URL do arquivo a ser feito download.      \n","        `nome_arquivo_destino` - Nome do arquivo a ser salvo.      \n","    \"\"\"\n","    \n","    # Verifica se existe o diretório base\n","    DIRETORIO_COHEBERT = verificaDiretorioCoheBERT()\n","    \n","    # Realiza o download de um arquivo em uma url\n","    data = requests.get(url_arquivo, stream=True)\n","    \n","    # Verifica se o arquivo existe\n","    if data.status_code != 200:\n","        logging.info(\"Exceção ao tentar realizar download {}. Response {}.\".format(url_arquivo, data.status_code))\n","        data.raise_for_status()\n","        return\n","\n","    # Recupera o nome do arquivo a ser realizado o download    \n","    nome_arquivo = nome_arquivo_destino.split(\"/\")[-1]  \n","\n","    # Define o nome e caminho do arquivo temporário    \n","    nome_arquivo_temporario = DIRETORIO_COHEBERT + \"/\" + nome_arquivo + \"_part\"\n","    \n","    logging.info(\"Download do arquivo: {}.\".format(nome_arquivo_destino))\n","    \n","    # Baixa o arquivo\n","    with open(nome_arquivo_temporario, \"wb\") as arquivo_binario:        \n","        tamanho_conteudo = data.headers.get(\"Content-Length\")        \n","        total = int(tamanho_conteudo) if tamanho_conteudo is not None else None\n","        # Barra de progresso de download\n","        progresso_bar = tqdm_notebook(unit=\"B\", total=total, unit_scale=True)                \n","        # Atualiza a barra de progresso\n","        for chunk in data.iter_content(chunk_size=1024):        \n","            if chunk:                \n","                progresso_bar.update(len(chunk))\n","                arquivo_binario.write(chunk)\n","    \n","    # Renomeia o arquivo temporário para o arquivo definitivo\n","    os.rename(nome_arquivo_temporario, nome_arquivo_destino)\n","    \n","    # Fecha a barra de progresso.\n","    progresso_bar.close()"]},{"cell_type":"markdown","metadata":{"id":"ksYnRk7zLGp0"},"source":["Remove tags de um documento"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"6qwKjGvyLG4v"},"outputs":[],"source":["def remove_tags(documento):\n","    \"\"\"\n","      Remove tags de um documento\n","    \"\"\"\n","    \n","    import re\n","\n","    documento_limpo = re.compile(\"<.*?>\")\n","    return re.sub(documento_limpo, \"\", documento)"]},{"cell_type":"markdown","metadata":{"id":"4pduTsINLeaz"},"source":["Funções auxiliares de arquivos"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"jirIzIstLea0"},"outputs":[],"source":["def carregar(nome_arquivo, encoding=\"Windows-1252\"):\n","    \"\"\"\n","      Carrega um arquivo texto e retorna as linhas como um único parágrafo(texto).\n","    \n","      Parâmetros:\n","        `nome_arquivo` - Nome do arquivo a ser carregado.  \n","    \"\"\"\n","\n","    # Abre o arquivo\n","    arquivo = open(nome_arquivo, \"r\", encoding= encoding)\n","    \n","    paragrafo = \"\"\n","    for linha in arquivo:\n","        linha = linha.splitlines()\n","        linha = \" \".join(linha)\n","        # Remove as tags existentes no final das linhas\n","        linha = remove_tags(linha)\n","        if linha != \"\":\n","          paragrafo = paragrafo + linha.strip() + \" \"\n","    \n","    # Fecha o arquivo\n","    arquivo.close()\n","\n","    # Remove os espaços em branco antes e depois do parágrafo\n","    return paragrafo.strip()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"EC9Xppq-_R0w"},"outputs":[],"source":["def carregarLista(nome_arquivo, encoding=\"Windows-1252\"):\n","    \"\"\"\n","      Carrega um arquivo texto e retorna as linhas como uma lista de sentenças(texto).\n","    \n","      Parâmetros:\n","        `nome_arquivo` - Nome do arquivo a ser carregado.   \n","        `encoding` - Codificação dos caracteres do arquivo.\n","    \"\"\"\n","\n","    # Abre o arquivo\n","    arquivo = open(nome_arquivo, \"r\", encoding= encoding)\n","    \n","    sentencas = []\n","    for linha in arquivo:        \n","        linha = linha.splitlines()\n","        linha = \" \".join(linha)\n","        linha = remove_tags(linha)\n","        if linha != \"\":\n","          sentencas.append(linha.strip())\n","    \n","    # Fecha o arquivo\n","    arquivo.close()\n","\n","    return sentencas "]},{"cell_type":"code","execution_count":null,"metadata":{"id":"fkVk5LQT_G3f"},"outputs":[],"source":["def salvar(nome_arquivo,texto):                       \n","    \"\"\"\n","      Salva um texto em arquivo.\n","     \n","      Parâmetros:\n","        `nome_arquivo` - Nome do arquivo a ser salvo.\n","        `texto` - Texto a ser salvo.     \n","    \"\"\"\n","\n","    arquivo = open(nome_arquivo, \"w\")\n","    arquivo.write(str(texto))\n","    arquivo.close()"]},{"cell_type":"markdown","metadata":{"id":"603LYIYKBmq5"},"source":["Função auxiliar para formatar o tempo como `hh: mm: ss`"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Guy6B4whsZFR"},"outputs":[],"source":["# Import das bibliotecas.\n","import time\n","import datetime\n","\n","def formataTempo(tempo):\n","    \"\"\"\n","      Pega a tempo em segundos e retorna uma string hh:mm:ss\n","    \"\"\"\n","    # Arredonda para o segundo mais próximo.\n","    tempo_arredondado = int(round((tempo)))\n","    \n","    # Formata como hh:mm:ss\n","    return str(datetime.timedelta(seconds=tempo_arredondado))    "]},{"cell_type":"markdown","metadata":{"id":"zVKAapz7RCxk"},"source":["Classe(ModelArguments) de definição dos parâmetros do modelo"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zgmN6RqDRDZS"},"outputs":[],"source":["# Import das bibliotecas.\n","from dataclasses import dataclass, field\n","from typing import Dict, Optional\n","from typing import List\n","\n","@dataclass\n","class ModeloArgumentosMedida:\n","    max_seq_len: Optional[int] = field(\n","        default=None,\n","        metadata={\"help\": \"max seq len\"},\n","    )    \n","    pretrained_model_name_or_path: str = field(\n","        default=\"neuralmind/bert-base-portuguese-cased\",\n","        metadata={\"help\": \"nome do modelo pré-treinado do BERT.\"},\n","    )\n","    modelo_spacy: str = field(\n","        default=\"pt_core_news_lg\",\n","        metadata={\"help\": \"nome do modelo do spaCy.\"},\n","    )\n","    versao_modelo_spacy: str = field(\n","        default=\"-3.2.0\",\n","        metadata={\"help\": \"versão do nome do modelo no spaCy.\"},\n","    )\n","    sentenciar_documento: bool = field(\n","        default=True,\n","        metadata={\"help\": \"Dividir o documento em sentenças(frases).\"},\n","    )\n","    do_lower_case: bool = field(\n","        default=False,\n","        metadata={\"help\": \"define se o texto do modelo deve ser todo em minúsculo.\"},\n","    )    \n","    output_attentions: bool = field(\n","        default=False,\n","        metadata={\"help\": \"habilita se o modelo retorna os pesos de atenção.\"},\n","    )\n","    output_hidden_states: bool = field(\n","        default=False,\n","        metadata={\"help\": \"habilita gerar as camadas ocultas do modelo.\"},\n","    )\n","    usar_mcl_ajustado : bool = field(\n","        default=False,\n","        metadata={\"help\": \"habilita o carragamento de mcl ajustado.\"},\n","    )"]},{"cell_type":"markdown","metadata":{"id":"rceIwWa7UmFZ"},"source":["Biblioteca de limpeza de tela\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"PXTEvmuhUmjO"},"outputs":[],"source":["# Import das bibliotecas.\n","from IPython.display import clear_output"]},{"cell_type":"markdown","metadata":{"id":"iAPVtRXQqDim"},"source":["## 1.3 Tratamento de logs"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"DcopxbGZqDip"},"outputs":[],"source":["# Import das bibliotecas.\n","import logging # Biblioteca de logging\n","\n","# Formatando a mensagem de logging\n","logging.basicConfig(format=\"%(asctime)s : %(levelname)s : %(message)s\")\n","\n","logger = logging.getLogger()\n","logger.setLevel(logging.INFO)"]},{"cell_type":"markdown","metadata":{"id":"_GjYtXcMnSAe"},"source":["## 1.4 Identificando o ambiente Colab"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"YMiH0E3OnRa1"},"outputs":[],"source":["# Import das bibliotecas.\n","import sys # Biblioteca para acessar módulos do sistema\n","\n","# Se estiver executando no Google Colaboratory\n","# Retorna true ou false se estiver no Google Colaboratory\n","IN_COLAB = \"google.colab\" in sys.modules"]},{"cell_type":"markdown","metadata":{"id":"RinFHFesVKis"},"source":["## 1.5 Colaboratory"]},{"cell_type":"markdown","metadata":{"id":"MPngEboiVbfi"},"source":["Usando Colab GPU para Treinamento\n"]},{"cell_type":"markdown","metadata":{"id":"EjWE6WlvVbfj"},"source":["Uma GPU pode ser adicionada acessando o menu e selecionando:\n","\n","`Edit -> Notebook Settings -> Hardware accelerator -> (GPU)`\n","\n","Em seguida, execute a célula a seguir para confirmar que a GPU foi detectada."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":4871,"status":"ok","timestamp":1670120948592,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"vtaYZmc3Vbfj","outputId":"adff7d0c-dcdc-42ba-970e-84f0742aab20"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:numexpr.utils:NumExpr defaulting to 2 threads.\n","INFO:root:Dispositivo GPU não encontrado\n"]}],"source":["# Import das bibliotecas.\n","import tensorflow as tf\n","\n","# Recupera o nome do dispositido da GPU.\n","device_name = tf.test.gpu_device_name()\n","\n","# O nome do dispositivo deve ser parecido com o seguinte:\n","if device_name == \"/device:GPU:0\":\n","    logging.info(\"Encontrei GPU em: {}\".format(device_name))\n","else:\n","    logging.info(\"Dispositivo GPU não encontrado\")\n","    #raise SystemError(\"Dispositivo GPU não encontrado\")"]},{"cell_type":"markdown","metadata":{"id":"iYRrUo2XWa8G"},"source":["Nome da GPU\n","\n","Para que a torch use a GPU, precisamos identificar e especificar a GPU como o dispositivo. Posteriormente, em nosso ciclo de treinamento, carregaremos dados no dispositivo.\n","\n","Vale a pena observar qual GPU você recebeu. A GPU Tesla P100 é muito mais rápido que as outras GPUs, abaixo uma lista ordenada:\n","- 1o Tesla P100\n","- 2o Tesla T4\n","- 3o Tesla P4 (Não tem memória para execução 4 x 8, somente 2 x 4)\n","- 4o Tesla K80 (Não tem memória para execução 4 x 8, somente 2 x 4)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"zrjqDO6nWa8J"},"outputs":[],"source":["# Import das bibliotecas.\n","import torch # Biblioteca para manipular os tensores\n","\n","def getDeviceGPU():\n","    \"\"\"\n","    Retorna um dispositivo de GPU se disponível ou CPU.\n","    \n","    Retorno:\n","    `device` - Um device de GPU ou CPU.       \n","    \"\"\"\n","        \n","    # Se existe GPU disponível.\n","    if torch.cuda.is_available():\n","        \n","        # Diz ao PyTorch para usar GPU.    \n","        device = torch.device(\"cuda\")\n","        \n","        logging.info(\"Existem {} GPU(s) disponíveis.\".format(torch.cuda.device_count()))\n","        logging.info(\"Iremos usar a GPU: {}.\".format(torch.cuda.get_device_name(0)))\n","\n","    # Se não.\n","    else:        \n","        logging.info(\"Sem GPU disponível, usando CPU.\")\n","        device = torch.device(\"cpu\")\n","        \n","    return device"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":548,"status":"ok","timestamp":1670120953546,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"ChDxmtXsKwjf","outputId":"0425faa7-9eb3-4a61-b75d-39a8f1bc87ff"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Sem GPU disponível, usando CPU.\n"]}],"source":["device = getDeviceGPU()"]},{"cell_type":"markdown","metadata":{"id":"kkdlEouHftcJ"},"source":["Conecta o modelo ao device"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"a-znVDGyfsVx"},"outputs":[],"source":["# Import das bibliotecas.\n","import torch # Biblioteca para manipular os tensores\n","\n","def conectaGPU(model, device):\n","    \"\"\"\n","      Conecta um modelo BERT a GPU.\n","\n","      Parâmetros:\n","        `model` - Um modelo BERT carregado.       \n","        `device` - Um device de GPU.     \n","    \n","      Retorno:\n","        `model` - Um objeto model BERT conectado a GPU.     \n","    \"\"\"\n","    # Associa a GPU ao modelo.\n","    model.to(device)\n","\n","    # Se existe GPU disponível.\n","    if torch.cuda.is_available():    \n","        # Diga ao pytorch para rodar este modelo na GPU.\n","        logging.info(\"Pytorch rodando o modelo na GPU.\")\n","        model.cuda()\n","        \n","    else:\n","        logging.info(\"Pytorch rodando sem GPU.\")\n","\n","    return model"]},{"cell_type":"markdown","metadata":{"id":"fGf59D0yVNx9"},"source":["Memória\n","\n","Memória disponível no ambiente"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":23,"status":"ok","timestamp":1670120953548,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"1iC5-pSAVh7_","outputId":"3733ac2d-2800-4b98-ebb2-3f9a2ee8a44f"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Seu ambiente de execução tem  13.6 gigabytes de RAM disponível\n","\n","INFO:root:Para habilitar um tempo de execução de RAM alta, selecione menu o ambiente de execução> \"Alterar tipo de tempo de execução\"\n","INFO:root:e selecione High-RAM. Então, execute novamente está célula\n"]}],"source":["# Importando as bibliotecas.\n","from psutil import virtual_memory\n","\n","ram_gb = virtual_memory().total / 1e9\n","logging.info(\"Seu ambiente de execução tem {: .1f} gigabytes de RAM disponível\\n\".format(ram_gb))\n","\n","if ram_gb < 20:\n","  logging.info(\"Para habilitar um tempo de execução de RAM alta, selecione menu o ambiente de execução> \\\"Alterar tipo de tempo de execução\\\"\")\n","  logging.info(\"e selecione High-RAM. Então, execute novamente está célula\")\n","else:\n","  logging.info(\"Você está usando um ambiente de execução de memória RAM alta!\")"]},{"cell_type":"markdown","metadata":{"id":"wijMXooQQLcQ"},"source":["## 1.6 Monta uma pasta no google drive para carregar os arquivos de dados."]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":35020,"status":"ok","timestamp":1670120988559,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"ysnDDapMQK8K","outputId":"85b574d4-0833-4f47-de34-83b3bd5c61d1"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive\n"]}],"source":["#@title\n","# import necessário\n","from google.colab import drive\n","\n","# Monta o drive na pasta especificada\n","drive.mount(\"/content/drive\")     "]},{"cell_type":"markdown","metadata":{"id":"Pqa-7WXBAw8q"},"source":["## 1.9 Instalação do BERT da Hugging Face"]},{"cell_type":"markdown","metadata":{"id":"eCdqJCtQN52l"},"source":["Instala a interface pytorch para o BERT by Hugging Face. "]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":9908,"status":"ok","timestamp":1670120998460,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"1RfUN_KolV-f","outputId":"2aac45b4-7a0c-4492-c80e-124bac4982ea"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting transformers==4.5.1\n","  Downloading transformers-4.5.1-py3-none-any.whl (2.1 MB)\n","\u001b[K     |████████████████████████████████| 2.1 MB 13.1 MB/s \n","\u001b[?25hRequirement already satisfied: packaging in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (21.3)\n","Requirement already satisfied: filelock in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (3.8.0)\n","Requirement already satisfied: requests in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (2.23.0)\n","Requirement already satisfied: tqdm>=4.27 in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (4.64.1)\n","Requirement already satisfied: numpy>=1.17 in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (1.21.6)\n","Requirement already satisfied: regex!=2019.12.17 in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (2022.6.2)\n","Collecting tokenizers<0.11,>=0.10.1\n","  Downloading tokenizers-0.10.3-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (3.3 MB)\n","\u001b[K     |████████████████████████████████| 3.3 MB 47.7 MB/s \n","\u001b[?25hCollecting sacremoses\n","  Downloading sacremoses-0.0.53.tar.gz (880 kB)\n","\u001b[K     |████████████████████████████████| 880 kB 65.3 MB/s \n","\u001b[?25hRequirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /usr/local/lib/python3.8/dist-packages (from packaging->transformers==4.5.1) (3.0.9)\n","Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (2.10)\n","Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (1.24.3)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (2022.9.24)\n","Requirement already satisfied: chardet<4,>=3.0.2 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (3.0.4)\n","Requirement already satisfied: six in /usr/local/lib/python3.8/dist-packages (from sacremoses->transformers==4.5.1) (1.15.0)\n","Requirement already satisfied: click in /usr/local/lib/python3.8/dist-packages (from sacremoses->transformers==4.5.1) (7.1.2)\n","Requirement already satisfied: joblib in /usr/local/lib/python3.8/dist-packages (from sacremoses->transformers==4.5.1) (1.2.0)\n","Building wheels for collected packages: sacremoses\n","  Building wheel for sacremoses (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for sacremoses: filename=sacremoses-0.0.53-py3-none-any.whl size=895260 sha256=6e709245b244fdc50ce0cd1907093c1ad09f90e7a7e689cf46fbe365da6d2a94\n","  Stored in directory: /root/.cache/pip/wheels/82/ab/9b/c15899bf659ba74f623ac776e861cf2eb8608c1825ddec66a4\n","Successfully built sacremoses\n","Installing collected packages: tokenizers, sacremoses, transformers\n","Successfully installed sacremoses-0.0.53 tokenizers-0.10.3 transformers-4.5.1\n"]}],"source":["!pip install -U transformers==4.5.1"]},{"cell_type":"markdown","metadata":{"id":"8bGda5JgMtQe"},"source":["# 2 Parametrização"]},{"cell_type":"markdown","metadata":{"id":"ifrYNTwGwKal"},"source":["## Gerais"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"5uiH9pNpwI6g"},"outputs":[],"source":["# Definição dos parâmetros a serem avaliados\n","\n","#Realiza o pooling dos tokens de palavras fora do vocabulário do BERT\n","POOLING_TOKENS = 1 # 1 - Sem pooling / 1 - Com pooling \n","\n","#Estratégia de recuperação dos embeddings: (1 - Embeddings da última camada, \n","#                                           2 - Embeddings da concatenação das 4 últimas camadas)\n","ESTRATEGIA_EMBEDDING = 1\n","\n","\n","# DEVE SER UM NUMERO IMPAR E MAIOR OU IGUAL A 3\n","TAMANHO_JANELA = 3\n","DISTANCIA_DA_PALAVRA_ALVO = (TAMANHO_JANELA-1)/2"]},{"cell_type":"markdown","metadata":{"id":"mhByVujAwNAU"},"source":["## Específicos"]},{"cell_type":"markdown","metadata":{"id":"FhMuEM1o1Aq3"},"source":["Parâmetros do modelo"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"oJ15-ylRRRdD"},"outputs":[],"source":["# Definição dos parâmetros do Modelo.\n","model_args = ModeloArgumentosMedida(     \n","    max_seq_len = 512,\n","    #pretrained_model_name_or_path = \"https://neuralmind-ai.s3.us-east-2.amazonaws.com/nlp/bert-large-portuguese-cased/bert-large-portuguese-cased_pytorch_checkpoint.zip\",\n","    #pretrained_model_name_or_path = \"https://neuralmind-ai.s3.us-east-2.amazonaws.com/nlp/bert-base-portuguese-cased/bert-base-portuguese-cased_pytorch_checkpoint.zip\",\n","    pretrained_model_name_or_path = \"neuralmind/bert-large-portuguese-cased\",\n","    #pretrained_model_name_or_path = \"neuralmind/bert-base-portuguese-cased\",    \n","    #pretrained_model_name_or_path = \"bert-base-multilingual-cased\",\n","    #pretrained_model_name_or_path = \"bert-base-multilingual-uncased\",\n","    modelo_spacy = \"pt_core_news_lg\",\n","    #modelo_spacy = \"pt_core_news_md\",\n","    #modelo_spacy = \"pt_core_news_sm\",\n","    versao_modelo_spacy = \"3.2.0\",\n","    sentenciar_documento = True,\n","    do_lower_case = False,   # default True  \n","    output_attentions = False,  # default False\n","    output_hidden_states = True, # default False, se True retorna todas as camadas do modelo para as operações de soma e concatenação\n","    usar_mcl_ajustado = False, # Especifica se deve ser carregado um MCL ajustado ou pré-treinado. Necessário especificar o tipo do modelo em pretrained_model_name_or_path. \n",")"]},{"cell_type":"markdown","metadata":{"id":"BLOqjcIzImVo"},"source":["## Nome do diretório dos arquivos de dados"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"xJEiTPnKImVp"},"outputs":[],"source":["# Diretório do cohebert\n","DIRETORIO_COHEBERT = \"MODERNIST\""]},{"cell_type":"markdown","metadata":{"id":"SUxlx7Sx4yxj"},"source":["## Define o caminho para os arquivos de dados"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"-gQpxAO74yxj"},"outputs":[],"source":["# Diretório local para os arquivos pré-processados\n","DIRETORIO_LOCAL = \"/content/\" + DIRETORIO_COHEBERT + \"/\"\n","\n","# Diretório no google drive com os arquivos pré-processados\n","DIRETORIO_DRIVE = \"/content/drive/MyDrive/Colab Notebooks/Data/\" + DIRETORIO_COHEBERT + \"/\""]},{"cell_type":"markdown","metadata":{"id":"tDgJTbPOZ8SW"},"source":["## Inicialização diretórios"]},{"cell_type":"markdown","metadata":{"id":"qpSERA9TC4WU"},"source":["Diretório base local"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"edg7eW2cDflg"},"outputs":[],"source":["# Importando as bibliotecas.\n","import os\n","\n","def criaDiretorioLocal():\n","\n","  # Cria o diretório para receber os arquivos Originais e Permutados\n","  # Diretório a ser criado\n","  dirbase = DIRETORIO_LOCAL[:-1]\n","\n","  if not os.path.exists(dirbase):  \n","      # Cria o diretório\n","      os.makedirs(dirbase)    \n","      logging.info(\"Diretório criado: {}.\".format(dirbase))\n","  else:    \n","      logging.info(\"Diretório já existe: {}.\".format(dirbase))"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":12,"status":"ok","timestamp":1670120998462,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"xge0ar9MJoKy","outputId":"ee373801-2a8c-404c-fae9-478f550a30ee"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Diretório criado: /content/MODERNIST.\n"]}],"source":["criaDiretorioLocal()"]},{"cell_type":"markdown","metadata":{"id":"Y7W-7V3QFbpR"},"source":["\n","# 3 Carrega dados"]},{"cell_type":"markdown","metadata":{"id":"oQUy9Tat2EF_"},"source":["## 3.1 Carregamento dos arquivos de dados originais e permutados"]},{"cell_type":"markdown","metadata":{"id":"bD_tNbBGPrnE"},"source":["\n","### 3.1.1 Especifica os nomes dos arquivos de dados\n","\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"bNgwJRC2uGJb"},"outputs":[],"source":["\n","# # Nome do arquivo original\n","# NOME_ARQUIVO_PARES_INSTANCIAS = \"pares_medidas_entre_palavras_vitimas_algoz.csv\"\n","# # NOME_ARQUIVO_PARES_INSTANCIAS = \"pares_medidas_entre_palavras_\"+str(len(lista_documentos_filtrados_emb))+\".csv\"\n","\n","# NOME_ARQUIVO_PARES_INSTANCIAS_COMPACTADO = \"pares_medidas_entre_palavras_vitimas_algoz.zip\"\n","# # NOME_ARQUIVO_PARES_INSTANCIAS_COMPACTADO = \"pares_medidas_entre_palavras_\"+str(len(lista_documentos_filtrados_emb))+\".zip\"\n","\n","\n","# Nome do arquivo\n","# Nome do arquivo original\n","NOME_ARQUIVO_DOCUMENTO_FILTRADO = \"pares_medidas_entre_palavras_vitimas_algoz.csv\"\n","# NOME_ARQUIVO_DOCUMENTO_FILTRADO = \"pares_medidas_entre_sentencas.csv\"\n","\n","NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO = \"pares_medidas_entre_palavras_vitimas_algoz.zip\"\n","# NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO = \"pares_medidas_entre_sentencas.zip\""]},{"cell_type":"markdown","metadata":{"id":"I0LsmsBlJeeV"},"source":["### 3.1.2 Cria o diretório local para receber os dados"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":11,"status":"ok","timestamp":1670120998463,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"gFYIHcIHE985","outputId":"ecb0979c-b599-464e-efd3-7a89143b8726"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Diretório já existe: /content/MODERNIST\n"]}],"source":["# Importando as bibliotecas.\n","import os\n","\n","# Cria o diretório para receber os arquivos Originais e Permutados\n","# Diretório a ser criado\n","dirbase = DIRETORIO_LOCAL[:-1]\n","\n","if not os.path.exists(dirbase):  \n","    # Cria o diretório\n","    os.makedirs(dirbase)    \n","    logging.info(\"Diretório criado: {}\".format(dirbase))\n","else:    \n","    logging.info(\"Diretório já existe: {}\".format(dirbase))"]},{"cell_type":"markdown","metadata":{"id":"D8A9syejCsD2"},"source":["### 3.1.3 Copia os arquivos do Google Drive para o Colaboratory"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":2951,"status":"ok","timestamp":1670121001405,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"pviuxToMCxQw","outputId":"8bb1ca48-8ec4-488d-dbce-0cf41679d3ab"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Terminei a cópia.\n"]}],"source":["# Se estiver executando no Google Colaboratory\n","if IN_COLAB:\n","\n","  !cp \"$DIRETORIO_DRIVE$NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO\" \"$DIRETORIO_LOCAL\"\n","\n","  logging.info(\"Terminei a cópia.\")"]},{"cell_type":"markdown","metadata":{"id":"rFCvZ6CUmt-9"},"source":["Descompacta os arquivos.\n","\n","Usa o unzip para descompactar:\n","*   `-o` sobrescreve o arquivo se existir\n","*   `-j` Não cria nenhum diretório\n","*   `-q` Desliga as mensagens \n","*   `-d` Diretório de destino\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":22261,"status":"ok","timestamp":1670121023660,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"dbHl3d88mouc","outputId":"bb43c51d-a80e-4847-c5ee-4078242b1cb1"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Terminei a descompactação.\n"]}],"source":["# Se estiver executando no Google Colaboratory\n","if IN_COLAB:\n","  !unzip -o -j -q \"$DIRETORIO_LOCAL$NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO\" -d \"$DIRETORIO_LOCAL\"\n","\n","  logging.info(\"Terminei a descompactação.\")"]},{"cell_type":"markdown","metadata":{"id":"qzhYJNWJm1z4"},"source":["### 3.1.4 Carregamento das lista com os dados dos arquivos originais"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":33472,"status":"ok","timestamp":1670121078378,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"QRHlixdHEDTb","outputId":"501dc5b0-a471-40bc-fa17-10ba2a145fdf"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:TERMINADO ORIGINAIS: 2596620.\n"]}],"source":["# Import das bibliotecas.\n","import pandas as pd\n","\n","# Abre o arquivo e retorna o DataFrame\n","lista_documentos_originais_filtrados = pd.read_csv(DIRETORIO_LOCAL + NOME_ARQUIVO_DOCUMENTO_FILTRADO, sep=\";\", encoding=\"UTF-8\")\n","\n","\n","logging.info(\"TERMINADO ORIGINAIS: {}.\".format(len(lista_documentos_originais_filtrados)))\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":557},"executionInfo":{"elapsed":18,"status":"ok","timestamp":1670121078379,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"jJ5STBZPLlie","outputId":"aa307cb9-9e40-431c-f375-a594de8a2feb"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         w1_id_documento  w1_posicaoToken  w1_token w1_posTag  w1_OOV  \\\n","1500608           200386                1   escravo      NOUN       0   \n","2210233           201595                2   senhora      NOUN       0   \n","1657013           200113                8  senhores      NOUN       0   \n","2546090           201105                3   crioula      NOUN       1   \n","607168            200139               10   escravo      NOUN       0   \n","\n","        w1_grupo w1_palavra_alvo  \\\n","1500608  escravo         escravo   \n","2210233   senhor         senhora   \n","1657013   senhor        senhores   \n","2546090  crioulo         crioula   \n","607168   escravo         escravo   \n","\n","                                               w1_sentenca  \\\n","1500608  O escravo nunca ou raramente ousa levantar os ...   \n","2210233                               – A senhora se opõe.   \n","1657013  Havia para ele na casa de seus amorosos senhor...   \n","2546090  Esméria era uma crioula de vinte anos com as r...   \n","607168   o ódio aos senhores já estava incubado na alma...   \n","\n","                    w1_obra                  w1_autor  ...  \\\n","1500608  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","2210233  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","1657013  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","2546090  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","607168   As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","\n","                    w2_obra                  w2_autor w2_ano w2_idObra  \\\n","1500608  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","2210233  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","1657013  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","2546090  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","607168   As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","\n","         w2_movimento                                        w2_document  \\\n","1500608    Romantismo  As visitas feitas em desoras por Esméria à sen...   \n","2210233    Romantismo  Talvez ; mas sou escravo ; este nome quando so...   \n","1657013    Romantismo  Oh , tio Alberto , livre-me desse demônio de f...   \n","2546090    Romantismo  A escrava ia marchando para o apogeu do seu po...   \n","607168     Romantismo  – Minha senhora que tem já dezesseis anos , há...   \n","\n","         w2_tamanho_sentenca  cos_mean   euc_mean   man_mean  \n","1500608                   44  0.529625  21.033674  518.76360  \n","2210233                   22  0.453998  23.454634  584.03937  \n","1657013                   25  0.442156  23.203417  542.12744  \n","2546090                   20  0.434582  22.297188  552.40564  \n","607168                    16  0.456978  22.827732  565.88873  \n","\n","[5 rows x 33 columns]"],"text/html":["\n","  <div id=\"df-ffb6de42-5db5-4a21-93cb-c5aed10b5b89\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>w1_id_documento</th>\n","      <th>w1_posicaoToken</th>\n","      <th>w1_token</th>\n","      <th>w1_posTag</th>\n","      <th>w1_OOV</th>\n","      <th>w1_grupo</th>\n","      <th>w1_palavra_alvo</th>\n","      <th>w1_sentenca</th>\n","      <th>w1_obra</th>\n","      <th>w1_autor</th>\n","      <th>...</th>\n","      <th>w2_obra</th>\n","      <th>w2_autor</th>\n","      <th>w2_ano</th>\n","      <th>w2_idObra</th>\n","      <th>w2_movimento</th>\n","      <th>w2_document</th>\n","      <th>w2_tamanho_sentenca</th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>1500608</th>\n","      <td>200386</td>\n","      <td>1</td>\n","      <td>escravo</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>O escravo nunca ou raramente ousa levantar os ...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>As visitas feitas em desoras por Esméria à sen...</td>\n","      <td>44</td>\n","      <td>0.529625</td>\n","      <td>21.033674</td>\n","      <td>518.76360</td>\n","    </tr>\n","    <tr>\n","      <th>2210233</th>\n","      <td>201595</td>\n","      <td>2</td>\n","      <td>senhora</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>senhor</td>\n","      <td>senhora</td>\n","      <td>– A senhora se opõe.</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>Talvez ; mas sou escravo ; este nome quando so...</td>\n","      <td>22</td>\n","      <td>0.453998</td>\n","      <td>23.454634</td>\n","      <td>584.03937</td>\n","    </tr>\n","    <tr>\n","      <th>1657013</th>\n","      <td>200113</td>\n","      <td>8</td>\n","      <td>senhores</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>senhor</td>\n","      <td>senhores</td>\n","      <td>Havia para ele na casa de seus amorosos senhor...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>Oh , tio Alberto , livre-me desse demônio de f...</td>\n","      <td>25</td>\n","      <td>0.442156</td>\n","      <td>23.203417</td>\n","      <td>542.12744</td>\n","    </tr>\n","    <tr>\n","      <th>2546090</th>\n","      <td>201105</td>\n","      <td>3</td>\n","      <td>crioula</td>\n","      <td>NOUN</td>\n","      <td>1</td>\n","      <td>crioulo</td>\n","      <td>crioula</td>\n","      <td>Esméria era uma crioula de vinte anos com as r...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>A escrava ia marchando para o apogeu do seu po...</td>\n","      <td>20</td>\n","      <td>0.434582</td>\n","      <td>22.297188</td>\n","      <td>552.40564</td>\n","    </tr>\n","    <tr>\n","      <th>607168</th>\n","      <td>200139</td>\n","      <td>10</td>\n","      <td>escravo</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>o ódio aos senhores já estava incubado na alma...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>– Minha senhora que tem já dezesseis anos , há...</td>\n","      <td>16</td>\n","      <td>0.456978</td>\n","      <td>22.827732</td>\n","      <td>565.88873</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>5 rows × 33 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-ffb6de42-5db5-4a21-93cb-c5aed10b5b89')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-ffb6de42-5db5-4a21-93cb-c5aed10b5b89 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-ffb6de42-5db5-4a21-93cb-c5aed10b5b89');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":32}],"source":["lista_documentos_originais_filtrados.sample(5)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":1892,"status":"ok","timestamp":1670121080255,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"pkXUmrCCKy5X","outputId":"c4bbfa6c-1720-4835-df85-2632f48ca9c5"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:TERMINADO CORREÇÃO ORIGINAIS_FILTRADOS: 2596620.\n"]}],"source":["# Import das bibliotecas.\n","import ast # Biblioteca para conversão de string em lista\n","\n","# Verifica se o tipo da coluna não é list e converte\n","lista_documentos_originais_filtrados[\"cos_mean\"] = lista_documentos_originais_filtrados[\"cos_mean\"].apply(lambda x: float(x) )\n","lista_documentos_originais_filtrados[\"euc_mean\"] = lista_documentos_originais_filtrados[\"euc_mean\"].apply(lambda x: float(x) )\n","lista_documentos_originais_filtrados[\"man_mean\"] = lista_documentos_originais_filtrados[\"man_mean\"].apply(lambda x: float(x) )\n","\n","\n","\n","logging.info(\"TERMINADO CORREÇÃO ORIGINAIS_FILTRADOS: {}.\".format(len(lista_documentos_originais_filtrados)))"]},{"cell_type":"markdown","metadata":{"id":"kV4ZjkGDWeLl"},"source":["#### filtra as coisas \n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"TOx5vfZtS4Wm"},"outputs":[],"source":["data = {\n","    0:{\"label\":\"negro\", \"alvo\":[\"negro\",\"negros\",\"negrinho\",\"negrinhos\",\"negra\",\"negras\",\"negrinha\",\"negrinhas\"]},\n","    1:{\"label\":\"crioulo\", \"alvo\": [\"crioulo\",\"crioulos\",\"crioulinho\",\"crioulinhos\",\"crioula\",\"crioulas\",\"crioulinha\",\"crioulinhas\"]},\n","    2:{\"label\":\"mulato\", \"alvo\":[\"mulato\",\"mulatos\",\"mulatinho\",\"mulatinhos\",\"mulata\",\"mulatas\",\"mulatinha\",\"mulatinhas\"]},\n","    3:{\"label\":\"criado\", \"alvo\":[\"criado\",\"criados\",\"criadinho\",\"criadinhos\",\"criada\",\"criadas\",\"criadinha\",\"criadinhas\"]},\n","    4:{\"label\":\"escravo\", \"alvo\":[\"escravo\",\"escravos\",\"escravinho\",\"escravinhos\",\"escrava\",\"escravas\",\"escravinha\",\"escravinhas\"]},\n","    5:{\"label\":\"senhor\", \"alvo\":[\"senhor\",\"senhores\",\"senhora\",\"senhoras\",]},\n","    6:{\"label\":\"branco\", \"alvo\":[\"branco\",\"brancos\",\"branca\",\"brancas\",]},\n","}"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"9JGuFuP5MidR"},"outputs":[],"source":["lista_documentos_filtrados = lista_documentos_originais_filtrados "]},{"cell_type":"code","execution_count":null,"metadata":{"id":"lbhokWFYvS7L"},"outputs":[],"source":["del lista_documentos_originais_filtrados"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"-biRrLGQ5RTC"},"outputs":[],"source":["lista_documentos_filtrados = lista_documentos_filtrados.drop_duplicates()"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":67,"status":"ok","timestamp":1670121090830,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"k5pLFDvyNXT7","outputId":"f6a61af2-38ce-4114-ebfc-f3174629700c"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["2596620"]},"metadata":{},"execution_count":38}],"source":["len(lista_documentos_filtrados)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":206},"executionInfo":{"elapsed":61,"status":"ok","timestamp":1670121090831,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"MW31fRoDMhMO","outputId":"c11c202a-8797-4d18-bab7-5691e3b8783f"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         w1_id_documento  w1_posicaoToken  w1_token w1_posTag  w1_OOV  \\\n","2389290           205389               39  senhores      NOUN       0   \n","\n","        w1_grupo w1_palavra_alvo  \\\n","2389290   senhor        senhores   \n","\n","                                               w1_sentenca  \\\n","2389290  O veneno da escravidão estava prática e eviden...   \n","\n","                    w1_obra                  w1_autor  ...  \\\n","2389290  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","\n","                    w2_obra                  w2_autor w2_ano w2_idObra  \\\n","2389290  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","\n","         w2_movimento                                        w2_document  \\\n","2389290    Romantismo  Não eram venenos , eram porém torpes , e , se ...   \n","\n","         w2_tamanho_sentenca  cos_mean   euc_mean  man_mean  \n","2389290                   45  0.321514  26.652658  651.2503  \n","\n","[1 rows x 33 columns]"],"text/html":["\n","  <div id=\"df-ddaf28b3-99d9-4d45-92cc-d0e4ebca8a01\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>w1_id_documento</th>\n","      <th>w1_posicaoToken</th>\n","      <th>w1_token</th>\n","      <th>w1_posTag</th>\n","      <th>w1_OOV</th>\n","      <th>w1_grupo</th>\n","      <th>w1_palavra_alvo</th>\n","      <th>w1_sentenca</th>\n","      <th>w1_obra</th>\n","      <th>w1_autor</th>\n","      <th>...</th>\n","      <th>w2_obra</th>\n","      <th>w2_autor</th>\n","      <th>w2_ano</th>\n","      <th>w2_idObra</th>\n","      <th>w2_movimento</th>\n","      <th>w2_document</th>\n","      <th>w2_tamanho_sentenca</th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>2389290</th>\n","      <td>205389</td>\n","      <td>39</td>\n","      <td>senhores</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>senhor</td>\n","      <td>senhores</td>\n","      <td>O veneno da escravidão estava prática e eviden...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>Não eram venenos , eram porém torpes , e , se ...</td>\n","      <td>45</td>\n","      <td>0.321514</td>\n","      <td>26.652658</td>\n","      <td>651.2503</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>1 rows × 33 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-ddaf28b3-99d9-4d45-92cc-d0e4ebca8a01')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-ddaf28b3-99d9-4d45-92cc-d0e4ebca8a01 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-ddaf28b3-99d9-4d45-92cc-d0e4ebca8a01');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":39}],"source":["lista_documentos_filtrados.sample()"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"IZh8-KPAOZzS"},"outputs":[],"source":["lista_documentos_filtrados_describe = lista_documentos_filtrados[[\"cos_mean\",\"euc_mean\",\"man_mean\"]]\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":424},"executionInfo":{"elapsed":55,"status":"ok","timestamp":1670121090833,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"SPSY1Ty0OmZn","outputId":"6821ddec-440c-498f-e909-ffb09758de21"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         cos_mean   euc_mean   man_mean\n","0        0.589168  19.720514  474.24730\n","1        0.595679  19.606079  472.21350\n","2        0.557034  19.715408  476.42682\n","3        0.486082  21.802818  538.40810\n","4        0.484162  22.160009  539.29080\n","...           ...        ...        ...\n","2596615  0.405300  23.763451  591.94060\n","2596616  0.439098  23.134821  575.05580\n","2596617  0.477433  22.639175  545.70090\n","2596618  0.906518   9.418887  227.20049\n","2596619  0.542729  20.917286  505.30120\n","\n","[2596620 rows x 3 columns]"],"text/html":["\n","  <div id=\"df-c7ff06f8-4a1e-4dd8-9bae-6d917243c282\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>0.589168</td>\n","      <td>19.720514</td>\n","      <td>474.24730</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>0.595679</td>\n","      <td>19.606079</td>\n","      <td>472.21350</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>0.557034</td>\n","      <td>19.715408</td>\n","      <td>476.42682</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>0.486082</td>\n","      <td>21.802818</td>\n","      <td>538.40810</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>0.484162</td>\n","      <td>22.160009</td>\n","      <td>539.29080</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>2596615</th>\n","      <td>0.405300</td>\n","      <td>23.763451</td>\n","      <td>591.94060</td>\n","    </tr>\n","    <tr>\n","      <th>2596616</th>\n","      <td>0.439098</td>\n","      <td>23.134821</td>\n","      <td>575.05580</td>\n","    </tr>\n","    <tr>\n","      <th>2596617</th>\n","      <td>0.477433</td>\n","      <td>22.639175</td>\n","      <td>545.70090</td>\n","    </tr>\n","    <tr>\n","      <th>2596618</th>\n","      <td>0.906518</td>\n","      <td>9.418887</td>\n","      <td>227.20049</td>\n","    </tr>\n","    <tr>\n","      <th>2596619</th>\n","      <td>0.542729</td>\n","      <td>20.917286</td>\n","      <td>505.30120</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>2596620 rows × 3 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-c7ff06f8-4a1e-4dd8-9bae-6d917243c282')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-c7ff06f8-4a1e-4dd8-9bae-6d917243c282 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-c7ff06f8-4a1e-4dd8-9bae-6d917243c282');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":41}],"source":["lista_documentos_filtrados_describe"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":300},"executionInfo":{"elapsed":520,"status":"ok","timestamp":1670121091303,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"St6S868jKWiA","outputId":"952b943c-51f5-484b-edc3-d095c0c7627f"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["          cos_mean     euc_mean     man_mean\n","count 2596620.0000 2596620.0000 2596620.0000\n","mean        0.4608      22.2951     543.7367\n","std         0.1024       2.7178      64.7671\n","min         0.0283       3.4628      87.9963\n","25%         0.3946      20.6337     504.2203\n","50%         0.4583      22.3184     544.8945\n","75%         0.5228      24.0138     585.1776\n","max         0.9869      33.7080     841.2441"],"text/html":["\n","  <div id=\"df-b4e416dc-9ec5-4d83-aa58-209cc7e5a3e2\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>count</th>\n","      <td>2596620.0000</td>\n","      <td>2596620.0000</td>\n","      <td>2596620.0000</td>\n","    </tr>\n","    <tr>\n","      <th>mean</th>\n","      <td>0.4608</td>\n","      <td>22.2951</td>\n","      <td>543.7367</td>\n","    </tr>\n","    <tr>\n","      <th>std</th>\n","      <td>0.1024</td>\n","      <td>2.7178</td>\n","      <td>64.7671</td>\n","    </tr>\n","    <tr>\n","      <th>min</th>\n","      <td>0.0283</td>\n","      <td>3.4628</td>\n","      <td>87.9963</td>\n","    </tr>\n","    <tr>\n","      <th>25%</th>\n","      <td>0.3946</td>\n","      <td>20.6337</td>\n","      <td>504.2203</td>\n","    </tr>\n","    <tr>\n","      <th>50%</th>\n","      <td>0.4583</td>\n","      <td>22.3184</td>\n","      <td>544.8945</td>\n","    </tr>\n","    <tr>\n","      <th>75%</th>\n","      <td>0.5228</td>\n","      <td>24.0138</td>\n","      <td>585.1776</td>\n","    </tr>\n","    <tr>\n","      <th>max</th>\n","      <td>0.9869</td>\n","      <td>33.7080</td>\n","      <td>841.2441</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-b4e416dc-9ec5-4d83-aa58-209cc7e5a3e2')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-b4e416dc-9ec5-4d83-aa58-209cc7e5a3e2 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-b4e416dc-9ec5-4d83-aa58-209cc7e5a3e2');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":42}],"source":["pd.set_option('display.float_format', lambda x: '%.4f' % x)\n","lista_documentos_filtrados_describe.describe()\n","# .apply(\"{0:.5f}\".format)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":34,"status":"ok","timestamp":1670121091305,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"qiMIRD6z_NpO","outputId":"1b8c9be6-6a4e-4e2f-b1a7-ff9aaf444ae0"},"outputs":[{"output_type":"stream","name":"stdout","text":["w1_id_documento\n","w1_posicaoToken\n","w1_token\n","w1_posTag\n","w1_OOV\n","w1_grupo\n","w1_palavra_alvo\n","w1_sentenca\n","w1_obra\n","w1_autor\n","w1_ano\n","w1_idObra\n","w1_movimento\n","w1_document\n","w1_tamanho_sentenca\n","w2_id_documento\n","w2_posicaoToken\n","w2_token\n","w2_posTag\n","w2_OOV\n","w2_grupo\n","w2_palavra_alvo\n","w2_sentenca\n","w2_obra\n","w2_autor\n","w2_ano\n","w2_idObra\n","w2_movimento\n","w2_document\n","w2_tamanho_sentenca\n","cos_mean\n","euc_mean\n","man_mean\n"]}],"source":["column_headers = list(lista_documentos_filtrados.columns.values)\n","for value in column_headers:\n","    print(value)\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"Ey5X5p5wBife"},"outputs":[],"source":["# lista_documentos_filtrados['sw1_grupo'].unique()\n","\n","\n","# duplicateRows = lista_documentos_filtrados[lista_documentos_filtrados.duplicated()]\n","\n","\n","# print(duplicateRows)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":21,"status":"ok","timestamp":1670121091306,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"hJI28OJp48RJ","outputId":"63cb7639-9725-4c76-b36d-f52195ebb38d"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["2596620"]},"metadata":{},"execution_count":45}],"source":["len(lista_documentos_filtrados)"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":49,"referenced_widgets":["53e4ac2d6d8843ad9392b6348872dd50","067447d0f712460e9483d3d6dd139531","4ebb876a06814c9bb4b1a7463cef3474","b2257fbad906438cb14d906e987cc983","9c5c063a37004635bc9f494f03f253a1","fc2ded7e00f640b0a3ec67938b8a2d86","7269c54decf941f399aba1a47f076dcc","672ba2e403a9498090c4605cfdcfaeee","65081bc039f34a53bb9a5e18fd3b6a3a","5eb8f49adf334e5bacde8d151990a264","bea21670b89c41b685cd70d506ac8c8b"]},"id":"fj5US0qA_JAM","executionInfo":{"status":"ok","timestamp":1670121505265,"user_tz":180,"elapsed":413974,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"eb8abb37-dbda-4a25-eb94-efab968039bf"},"outputs":[{"output_type":"display_data","data":{"text/plain":["Documentos:   0%|          | 0/2596620 [00:00<?, ? documento/s]"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"53e4ac2d6d8843ad9392b6348872dd50"}},"metadata":{}}],"source":["limite = 0.8\n","\n","datas = {\n","    \"negro\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"crioulo\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"mulato\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"criado\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"escravo\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"senhor\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"branco\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","}\n","\n","\n","\n","# Barra de progresso dos documentos\n","lista_documentos_originais_bar = tqdm_notebook(lista_documentos_filtrados.iterrows(), desc=f\"Documentos\", unit=f\" documento\", total=len(lista_documentos_filtrados))\n","\n","# Percorre os documentos\n","for i, linha_documento in lista_documentos_originais_bar:  \n","    w1_id_documento = linha_documento['w1_id_documento']\n","    w1_posicaoToken = linha_documento['w1_posicaoToken']\n","    w1_token = linha_documento['w1_token']\n","    w1_posTag = linha_documento['w1_posTag']\n","    w1_OOV = linha_documento['w1_OOV']\n","    w1_grupo = linha_documento['w1_grupo']\n","    w1_palavra_alvo = linha_documento['w1_palavra_alvo']\n","    w1_sentenca = linha_documento['w1_sentenca']\n","    w1_obra = linha_documento['w1_obra']\n","    w1_autor = linha_documento['w1_autor']\n","    w1_ano = linha_documento['w1_ano']\n","    w1_idObra = linha_documento['w1_idObra']\n","    w1_movimento = linha_documento['w1_movimento']\n","    w1_document = linha_documento['w1_document']\n","    w1_tamanho_sentenca = linha_documento['w1_tamanho_sentenca']\n","    w2_id_documento = linha_documento['w2_id_documento']\n","    w2_posicaoToken = linha_documento['w2_posicaoToken']\n","    w2_token = linha_documento['w2_token']\n","    w2_posTag = linha_documento['w2_posTag']\n","    w2_OOV = linha_documento['w2_OOV']\n","    w2_grupo = linha_documento['w2_grupo']\n","    w2_palavra_alvo = linha_documento['w2_palavra_alvo']\n","    w2_sentenca = linha_documento['w2_sentenca']\n","    w2_obra = linha_documento['w2_obra']\n","    w2_autor = linha_documento['w2_autor']\n","    w2_ano = linha_documento['w2_ano']\n","    w2_idObra = linha_documento['w2_idObra']\n","    w2_movimento = linha_documento['w2_movimento']\n","    w2_document = linha_documento['w2_document']\n","    w2_tamanho_sentenca = linha_documento['w2_tamanho_sentenca']\n","    cos_mean = linha_documento['cos_mean']\n","    euc_mean = linha_documento['euc_mean']\n","    man_mean = linha_documento['man_mean']\n","\n","    if cos_mean >= limite:\n","        datas[w1_grupo]['ids'].append([w1_id_documento])\n","        datas[w1_grupo]['cos'].append([cos_mean])\n","        datas[w1_grupo]['euc'].append([euc_mean])\n","        datas[w1_grupo]['man'].append([man_mean])\n","        datas[w1_grupo]['tamanho'].append([w1_tamanho_sentenca])\n","\n","    \n","\n","\n","\n"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"lVJvss9rLbB2","executionInfo":{"status":"ok","timestamp":1670121505266,"user_tz":180,"elapsed":16,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"cb250650-6c26-461d-a4e4-0156280a9412"},"outputs":[{"output_type":"stream","name":"stdout","text":["negro 1530   0.8455577194690704   11.742411613464355   290.99964   19.5\n","crioulo 1075   0.8847353458404541   9.48660945892334   237.58429   19.0\n","escravo 4747   0.843049168586731   12.016457557678224   297.58484   22.0\n","senhor 5432   0.8539631366729736   11.933530807495115   295.98569   15.0\n","branco 16   0.8128719329833984   13.108909130096436   322.46283500000004   8.0\n"]}],"source":["import numpy as np\n","\n","if len(datas[\"negro\"]['ids']) != 0:\n","    print(\"negro\", len(datas[\"negro\"]['ids']),\" \",np.median(datas[\"negro\"]['cos']),\" \",np.median(datas[\"negro\"]['euc']),\" \",np.median(datas[\"negro\"]['man']),\" \",np.median(datas[\"negro\"]['tamanho']))\n","\n","if len(datas[\"crioulo\"]['ids']) != 0:\n","    print(\"crioulo\", len(datas[\"crioulo\"]['ids']),\" \",np.median(datas[\"crioulo\"]['cos']),\" \",np.median(datas[\"crioulo\"]['euc']),\" \",np.median(datas[\"crioulo\"]['man']),\" \",np.median(datas[\"crioulo\"]['tamanho']))\n","\n","if len(datas[\"mulato\"]['ids']) != 0:\n","    print(\"mulato\",len(datas[\"mulato\"]['ids']),\" \",np.median(datas[\"mulato\"]['cos']),\" \",np.median(datas[\"mulato\"]['euc']),\" \",np.median(datas[\"mulato\"]['man']),\" \",np.median(datas[\"mulato\"]['tamanho']))\n","\n","if len(datas[\"criado\"]['ids']) != 0:\n","    print(\"criado\", len(datas[\"criado\"]['ids']),\" \",np.median(datas[\"criado\"]['cos']),\" \",np.median(datas[\"criado\"]['euc']),\" \",np.median(datas[\"criado\"]['man']),\" \",np.median(datas[\"criado\"]['tamanho']))\n","\n","if len(datas[\"escravo\"]['ids']) != 0:\n","    print(\"escravo\",len(datas[\"escravo\"]['ids']),\" \",np.median(datas[\"escravo\"]['cos']),\" \",np.median(datas[\"escravo\"]['euc']),\" \",np.median(datas[\"escravo\"]['man']),\" \",np.median(datas[\"escravo\"]['tamanho']))\n","\n","if len(datas[\"senhor\"]['ids']) != 0:\n","    print(\"senhor\",len(datas[\"senhor\"]['ids']),\" \",np.median(datas[\"senhor\"]['cos']),\" \",np.median(datas[\"senhor\"]['euc']),\" \",np.median(datas[\"senhor\"]['man']),\" \",np.median(datas[\"senhor\"]['tamanho']))\n","\n","if len(datas[\"branco\"]['ids']) != 0:\n","    print(\"branco\",len(datas[\"branco\"]['ids']),\" \",np.median(datas[\"branco\"]['cos']),\" \",np.median(datas[\"branco\"]['euc']),\" \",np.median(datas[\"branco\"]['man']),\" \",np.median(datas[\"branco\"]['tamanho']))"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"v6xnM9pHPwVX"},"outputs":[],"source":["limitador_1 = limite\n","lista_documentos_filtrados_limite = lista_documentos_filtrados.loc[lista_documentos_filtrados['cos_mean'] >= limitador_1]\n","\n","lista_documentos_filtrados_limite_negro = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['w1_grupo'] == 'negro']\n","lista_documentos_filtrados_limite_crioulo = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['w1_grupo'] == 'crioulo']\n","lista_documentos_filtrados_limite_mulato = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['w1_grupo'] == 'mulato']\n","lista_documentos_filtrados_limite_criado = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['w1_grupo'] == 'criado']\n","lista_documentos_filtrados_limite_escravo = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['w1_grupo'] == 'escravo']\n","lista_documentos_filtrados_limite_senhor = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['w1_grupo'] == 'senhor']\n","lista_documentos_filtrados_limite_branco = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['w1_grupo'] == 'branco']\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"N0dY6lnD-I3V"},"outputs":[],"source":["lista_documentos_filtrados_limite_negro"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"LZPZW8MpZD83"},"outputs":[],"source":["lista_documentos_filtrados_limite_negro = lista_documentos_filtrados_limite_negro[['w1_id_documento','w1_posicaoToken','w1_token']]\n","lista_documentos_filtrados_limite_crioulo = lista_documentos_filtrados_limite_crioulo[['w1_id_documento','w1_posicaoToken','w1_token']]\n","lista_documentos_filtrados_limite_mulato = lista_documentos_filtrados_limite_mulato[['w1_id_documento','w1_posicaoToken','w1_token']]\n","lista_documentos_filtrados_limite_criado = lista_documentos_filtrados_limite_criado[['w1_id_documento','w1_posicaoToken','w1_token']]\n","lista_documentos_filtrados_limite_escravo = lista_documentos_filtrados_limite_escravo[['w1_id_documento','w1_posicaoToken','w1_token']]\n","lista_documentos_filtrados_limite_senhor = lista_documentos_filtrados_limite_senhor[['w1_id_documento','w1_posicaoToken','w1_token']]\n","lista_documentos_filtrados_limite_branco = lista_documentos_filtrados_limite_branco[['w1_id_documento','w1_posicaoToken','w1_token']]\n","\n","lista_documentos_filtrados_limite_w = lista_documentos_filtrados_limite[['w1_id_documento','w1_posicaoToken','w1_token']] \n","\n","lista_documentos_filtrados_limite_negro['contador'] = 0\n","lista_documentos_filtrados_limite_crioulo['contador'] = 0\n","lista_documentos_filtrados_limite_mulato['contador'] = 0\n","lista_documentos_filtrados_limite_criado['contador'] = 0\n","lista_documentos_filtrados_limite_escravo['contador'] = 0\n","lista_documentos_filtrados_limite_senhor['contador'] = 0\n","lista_documentos_filtrados_limite_branco['contador'] = 0\n","lista_documentos_filtrados_limite_w['contador'] = 0"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"9sfP_kkXZbQj"},"outputs":[],"source":["lista_documentos_filtrados_limite_w_group = lista_documentos_filtrados_limite_w.groupby(['w1_id_documento','w1_posicaoToken','w1_token'],sort=False).count()\n","lista_documentos_filtrados_limite_w_sorted = lista_documentos_filtrados_limite_w_group.sort_values('contador', ascending=False)['contador']\n"]},{"cell_type":"code","source":["len(lista_documentos_filtrados_limite_w_sorted)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"KK780h_gAFU3","executionInfo":{"status":"ok","timestamp":1670121549861,"user_tz":180,"elapsed":6,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"9052ee9c-833b-45a4-cca2-d49531feb14c"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["383"]},"metadata":{},"execution_count":63}]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"x0xqipUJhls3","executionInfo":{"status":"ok","timestamp":1670121576858,"user_tz":180,"elapsed":337,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"9aeb8a16-74e7-46eb-e4b0-30f4986db5e8"},"outputs":[{"output_type":"stream","name":"stdout","text":["w1_id_documento  w1_posicaoToken  w1_token\n","202223           2                escrava     79\n","203995           1                escrava     79\n","200982           1                escravo     75\n","203173           4                senhora     73\n","202613           1                senhora     72\n","204904           4                senhora     72\n","202922           1                senhora     72\n","203527           10               senhora     71\n","204686           1                escrava     71\n","202561           14               senhora     71\n","201082           5                senhora     70\n","203462           6                senhora     69\n","202863           4                senhora     69\n","204087           5                senhora     69\n","203182           2                senhora     68\n","201467           10               escrava     68\n","202462           1                escrava     67\n","200021           59               escravo     67\n","202815           31               escrava     67\n","201110           6                senhora     67\n","202823           20               senhora     67\n","204111           10               senhora     67\n","204040           8                senhora     67\n","205379           1                escrava     67\n","202046           8                escrava     66\n","202762           1                senhora     66\n","204250           5                senhora     66\n","202812           1                escrava     65\n","201144           11               senhora     65\n","200677           1                escravo     64\n","205297           1                senhora     64\n","202812           22               senhora     64\n","205348           9                senhora     64\n","203736           3                senhora     64\n","201144           1                escrava     63\n","204470           18               senhora     63\n","203666           4                escrava     63\n","201486           24               senhora     63\n","204588           1                senhora     63\n","204107           2                senhora     63\n","205468           6                senhora     63\n","205347           7                senhora     63\n","202978           52               senhora     62\n","202581           2                senhora     62\n","200947           11               escravo     62\n","201438           31               senhora     62\n","204560           2                senhora     62\n","204221           1                escrava     62\n","203178           1                senhora     61\n","204612           9                senhora     61\n","Name: contador, dtype: int64\n"]}],"source":["print(lista_documentos_filtrados_limite_w_sorted[:5])"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":1000},"id":"2rMJOerUmDmE","executionInfo":{"status":"ok","timestamp":1670121505796,"user_tz":180,"elapsed":21,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"a45bc1fa-2a8a-4bd8-e727-f94e36111088"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         w1_id_documento  w1_posicaoToken w1_token w1_posTag  w1_OOV w1_grupo  \\\n","157               200923                1    negro      NOUN       0    negro   \n","398               200923                1    negro      NOUN       0    negro   \n","776               200923                1    negro      NOUN       0    negro   \n","931               200923                1    negro      NOUN       0    negro   \n","1026              200923                1    negro      NOUN       0    negro   \n","...                  ...              ...      ...       ...     ...      ...   \n","2595716           201095               11  escrava      VERB       0  escravo   \n","2596341           201095               11  escrava      VERB       0  escravo   \n","2596343           201095               11  escrava      VERB       0  escravo   \n","2596579           201095               11  escrava      VERB       0  escravo   \n","2596618           201095               11  escrava      VERB       0  escravo   \n","\n","        w1_palavra_alvo                                        w1_sentenca  \\\n","157               negro  O negro da lanterna deu tão forte pontapé no e...   \n","398               negro  O negro da lanterna deu tão forte pontapé no e...   \n","776               negro  O negro da lanterna deu tão forte pontapé no e...   \n","931               negro  O negro da lanterna deu tão forte pontapé no e...   \n","1026              negro  O negro da lanterna deu tão forte pontapé no e...   \n","...                 ...                                                ...   \n","2595716         escrava  Paulo Borges não dava importância a essas liga...   \n","2596341         escrava  Paulo Borges não dava importância a essas liga...   \n","2596343         escrava  Paulo Borges não dava importância a essas liga...   \n","2596579         escrava  Paulo Borges não dava importância a essas liga...   \n","2596618         escrava  Paulo Borges não dava importância a essas liga...   \n","\n","                    w1_obra                  w1_autor  ...  \\\n","157      As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","398      As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","776      As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","931      As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","1026     As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","...                     ...                       ...  ...   \n","2595716  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","2596341  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","2596343  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","2596579  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","2596618  As Vítimas-Algozes  Joaquim Manuel de Macedo  ...   \n","\n","                    w2_obra                  w2_autor w2_ano w2_idObra  \\\n","157      As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","398      As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","776      As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","931      As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","1026     As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","...                     ...                       ...    ...       ...   \n","2595716  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","2596341  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","2596343  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","2596579  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","2596618  As Vítimas-Algozes  Joaquim Manuel de Macedo   1869         2   \n","\n","         w2_movimento                                        w2_document  \\\n","157        Romantismo  – Pai-Raiol , quando quer , mata com os olhos ...   \n","398        Romantismo            O escravo africano é o rei do feitiço .   \n","776        Romantismo  O terrível negro , que conhecia a influência d...   \n","931        Romantismo  Esméria , temendo o amante ou dele satisfeita ...   \n","1026       Romantismo  Entretanto e por isso mesmo que o segredo desa...   \n","...               ...                                                ...   \n","2595716    Romantismo  simulou-se tomada de afeição pelo menino recém...   \n","2596341    Romantismo                                – disse a escrava .   \n","2596343    Romantismo                        A escrava curvou a cabeça .   \n","2596579    Romantismo  E tirando do bolso um pequeno embrulho que enc...   \n","2596618    Romantismo  Paulo Borges não dava importância a essas liga...   \n","\n","         w2_tamanho_sentenca cos_mean euc_mean  man_mean  \n","157                       17   0.9237   8.3362  209.2801  \n","398                        9   0.8196  12.6558  313.6362  \n","776                       19   0.9076   9.0713  229.2212  \n","931                       37   0.8785  10.6084  262.8229  \n","1026                      48   0.8974   9.5732  243.3005  \n","...                      ...      ...      ...       ...  \n","2595716                   70   0.8003  13.8655  344.7575  \n","2596341                    5   0.8101  13.3485  337.3385  \n","2596343                    6   0.8387  12.3682  307.8176  \n","2596579                   37   0.8098  13.3299  333.2772  \n","2596618                   13   0.9065   9.4189  227.2005  \n","\n","[12800 rows x 33 columns]"],"text/html":["\n","  <div id=\"df-9fe17216-84ca-4590-a494-e6df44543725\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>w1_id_documento</th>\n","      <th>w1_posicaoToken</th>\n","      <th>w1_token</th>\n","      <th>w1_posTag</th>\n","      <th>w1_OOV</th>\n","      <th>w1_grupo</th>\n","      <th>w1_palavra_alvo</th>\n","      <th>w1_sentenca</th>\n","      <th>w1_obra</th>\n","      <th>w1_autor</th>\n","      <th>...</th>\n","      <th>w2_obra</th>\n","      <th>w2_autor</th>\n","      <th>w2_ano</th>\n","      <th>w2_idObra</th>\n","      <th>w2_movimento</th>\n","      <th>w2_document</th>\n","      <th>w2_tamanho_sentenca</th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>157</th>\n","      <td>200923</td>\n","      <td>1</td>\n","      <td>negro</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>O negro da lanterna deu tão forte pontapé no e...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>– Pai-Raiol , quando quer , mata com os olhos ...</td>\n","      <td>17</td>\n","      <td>0.9237</td>\n","      <td>8.3362</td>\n","      <td>209.2801</td>\n","    </tr>\n","    <tr>\n","      <th>398</th>\n","      <td>200923</td>\n","      <td>1</td>\n","      <td>negro</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>O negro da lanterna deu tão forte pontapé no e...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>O escravo africano é o rei do feitiço .</td>\n","      <td>9</td>\n","      <td>0.8196</td>\n","      <td>12.6558</td>\n","      <td>313.6362</td>\n","    </tr>\n","    <tr>\n","      <th>776</th>\n","      <td>200923</td>\n","      <td>1</td>\n","      <td>negro</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>O negro da lanterna deu tão forte pontapé no e...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>O terrível negro , que conhecia a influência d...</td>\n","      <td>19</td>\n","      <td>0.9076</td>\n","      <td>9.0713</td>\n","      <td>229.2212</td>\n","    </tr>\n","    <tr>\n","      <th>931</th>\n","      <td>200923</td>\n","      <td>1</td>\n","      <td>negro</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>O negro da lanterna deu tão forte pontapé no e...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>Esméria , temendo o amante ou dele satisfeita ...</td>\n","      <td>37</td>\n","      <td>0.8785</td>\n","      <td>10.6084</td>\n","      <td>262.8229</td>\n","    </tr>\n","    <tr>\n","      <th>1026</th>\n","      <td>200923</td>\n","      <td>1</td>\n","      <td>negro</td>\n","      <td>NOUN</td>\n","      <td>0</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>O negro da lanterna deu tão forte pontapé no e...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>Entretanto e por isso mesmo que o segredo desa...</td>\n","      <td>48</td>\n","      <td>0.8974</td>\n","      <td>9.5732</td>\n","      <td>243.3005</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>2595716</th>\n","      <td>201095</td>\n","      <td>11</td>\n","      <td>escrava</td>\n","      <td>VERB</td>\n","      <td>0</td>\n","      <td>escravo</td>\n","      <td>escrava</td>\n","      <td>Paulo Borges não dava importância a essas liga...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>simulou-se tomada de afeição pelo menino recém...</td>\n","      <td>70</td>\n","      <td>0.8003</td>\n","      <td>13.8655</td>\n","      <td>344.7575</td>\n","    </tr>\n","    <tr>\n","      <th>2596341</th>\n","      <td>201095</td>\n","      <td>11</td>\n","      <td>escrava</td>\n","      <td>VERB</td>\n","      <td>0</td>\n","      <td>escravo</td>\n","      <td>escrava</td>\n","      <td>Paulo Borges não dava importância a essas liga...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>– disse a escrava .</td>\n","      <td>5</td>\n","      <td>0.8101</td>\n","      <td>13.3485</td>\n","      <td>337.3385</td>\n","    </tr>\n","    <tr>\n","      <th>2596343</th>\n","      <td>201095</td>\n","      <td>11</td>\n","      <td>escrava</td>\n","      <td>VERB</td>\n","      <td>0</td>\n","      <td>escravo</td>\n","      <td>escrava</td>\n","      <td>Paulo Borges não dava importância a essas liga...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>A escrava curvou a cabeça .</td>\n","      <td>6</td>\n","      <td>0.8387</td>\n","      <td>12.3682</td>\n","      <td>307.8176</td>\n","    </tr>\n","    <tr>\n","      <th>2596579</th>\n","      <td>201095</td>\n","      <td>11</td>\n","      <td>escrava</td>\n","      <td>VERB</td>\n","      <td>0</td>\n","      <td>escravo</td>\n","      <td>escrava</td>\n","      <td>Paulo Borges não dava importância a essas liga...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>E tirando do bolso um pequeno embrulho que enc...</td>\n","      <td>37</td>\n","      <td>0.8098</td>\n","      <td>13.3299</td>\n","      <td>333.2772</td>\n","    </tr>\n","    <tr>\n","      <th>2596618</th>\n","      <td>201095</td>\n","      <td>11</td>\n","      <td>escrava</td>\n","      <td>VERB</td>\n","      <td>0</td>\n","      <td>escravo</td>\n","      <td>escrava</td>\n","      <td>Paulo Borges não dava importância a essas liga...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>...</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>Paulo Borges não dava importância a essas liga...</td>\n","      <td>13</td>\n","      <td>0.9065</td>\n","      <td>9.4189</td>\n","      <td>227.2005</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>12800 rows × 33 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-9fe17216-84ca-4590-a494-e6df44543725')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-9fe17216-84ca-4590-a494-e6df44543725 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-9fe17216-84ca-4590-a494-e6df44543725');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":53}],"source":["lista_documentos_filtrados_limite"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"KkYF6MYZlm8d","executionInfo":{"status":"ok","timestamp":1670121638838,"user_tz":180,"elapsed":349,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"c486bb98-bfa7-4bd1-fea7-7b3056846cb3"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["79"]},"metadata":{},"execution_count":66}],"source":["lista_documentos_filtrados_limite_w_w2 = lista_documentos_filtrados_limite.loc[(lista_documentos_filtrados_limite['w1_id_documento'] == 202223) & (lista_documentos_filtrados_limite['w1_token'] == 'escrava') & (lista_documentos_filtrados_limite['cos_mean'] >= limitador_1)]\n","\n","len(lista_documentos_filtrados_limite_w_w2)"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"ltLMFQoimZ7E"},"outputs":[],"source":["lista_documentos_filtrados_limite_w_w2 = lista_documentos_filtrados_limite_w_w2.sort_values('cos_mean', ascending=False)"]},{"cell_type":"code","source":["print(lista_documentos_filtrados_limite_w_w2[[\"w2_sentenca\",\"w2_token\",\"w2_posicaoToken\"]][:10])"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"BpnCPFF9Ahhk","executionInfo":{"status":"ok","timestamp":1670121805567,"user_tz":180,"elapsed":349,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"c3732009-d61f-4621-8479-b9b12a9e81b5"},"execution_count":null,"outputs":[{"output_type":"stream","name":"stdout","text":["                                               w2_sentenca w2_token  \\\n","1445996            A escrava vendia ou revendia a senhora.  escrava   \n","1451166                         A escrava curvou a cabeça.  escrava   \n","1444798  O negro da lanterna deu tão forte pontapé no e...  escrava   \n","1448043  A escrava pouco e pouco ia por sua vez cativan...  escrava   \n","1450233  A escrava sacrificava a senhora sem piedade, t...  escrava   \n","1448949  Possesso da depravação, Paulo Borges, o senhor...  escrava   \n","1449876  Era uma escrava esperta, hábil e ativa: criara...  escrava   \n","1447090  A escrava devia estar ufanosa da mentira, e po...  escrava   \n","1448831  Uma escrava mucama de menina que em breve ia s...  escrava   \n","1450441  A velha escrava era a incumbida dos cuidados d...  escrava   \n","\n","         w2_posicaoToken  \n","1445996                1  \n","1451166                1  \n","1444798               12  \n","1448043                1  \n","1450233                1  \n","1448949               15  \n","1449876                2  \n","1447090                1  \n","1448831                1  \n","1450441                2  \n"]}]},{"cell_type":"code","execution_count":null,"metadata":{"id":"g3d9kd2TSfzQ"},"outputs":[],"source":["lista_documentos_filtrados_limite_w_w2 = lista_documentos_filtrados_limite_w_w2[['w2_token']]\n","lista_documentos_filtrados_limite_w_w2['contador'] = 0\n","\n","len(lista_documentos_filtrados_limite_w_w2)\n","\n","lista_documentos_filtrados_limite_w2_group = lista_documentos_filtrados_limite_w_w2.groupby(['w2_token'],sort=False).count()\n","\n","lista_documentos_filtrados_limite_w2_sorted = lista_documentos_filtrados_limite_w2_group.sort_values('contador', ascending=False)['contador']"]},{"cell_type":"code","execution_count":null,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"O-ED-uJgnKgf","executionInfo":{"status":"ok","timestamp":1670121505797,"user_tz":180,"elapsed":16,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"beba294e-f971-413d-b3e5-311256708ac2"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["w2_token\n","escrava       43\n","escravo       23\n","escravidão     6\n","escravos       6\n","negra          1\n","Name: contador, dtype: int64"]},"metadata":{},"execution_count":57}],"source":["lista_documentos_filtrados_limite_w2_sorted.head(10)"]},{"cell_type":"code","source":["len(lista_documentos_filtrados_limite)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"e-x6YRfMxblE","executionInfo":{"status":"ok","timestamp":1670121505798,"user_tz":180,"elapsed":14,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"081363af-a630-4029-9fc1-7502ef02f252"},"execution_count":null,"outputs":[{"output_type":"execute_result","data":{"text/plain":["12800"]},"metadata":{},"execution_count":58}]},{"cell_type":"markdown","metadata":{"id":"Yj0ya60zrm8t"},"source":["# 4 Finalização"]},{"cell_type":"markdown","metadata":{"id":"Bcjt085lZGUr"},"source":["## 4.1 Tempo final de processamento\n","\n"]},{"cell_type":"code","execution_count":null,"metadata":{"id":"H50_GKJwpDha","executionInfo":{"status":"ok","timestamp":1670121505798,"user_tz":180,"elapsed":12,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"colab":{"base_uri":"https://localhost:8080/"},"outputId":"e998fbf2-346b-4941-8ace-8daff366ad0a"},"outputs":[{"output_type":"stream","name":"stdout","text":["\n","  Tempo processamento:  0:09:23 (h:mm:ss)\n"]}],"source":["# Pega o tempo atual menos o tempo do início do processamento.\n","final_processamento = time.time()\n","tempo_total_processamento = formataTempo(final_processamento - inicio_processamento)\n","\n","print(\"\")\n","print(\"  Tempo processamento:  {:} (h:mm:ss)\".format(tempo_total_processamento))"]}],"metadata":{"colab":{"collapsed_sections":["EKOTlwcmxmej","PKUr9Vk4BNLC","GOcN8hK-scnt","iAPVtRXQqDim","_GjYtXcMnSAe","Pqa-7WXBAw8q","SUxlx7Sx4yxj","L7G3-MOsQ1N_","AEzytjZi5Iw2","onM1ZApom-_W","6ZVwbmn3Nx2t","Jxe-mh-l6sJY","m4KV_jI-Nx2w","bGaf7bkpAEiX","ZB6bR42PA28c","B4Soqt3fp3Lu","ENvsIER06sJX","b01WgMSSKY_u","TouR4GjNJZD6","_xaeX0oTVQ5t","MBGTMy8Ic7GK","uiuxdXe9t1BX","rHt4e5pAcEMd","V74WUpHqcfoI","eaneOhAKcO-3","6tKcaIfReqdy","e8n7Z5s-QZF8","-pZZrUKRhR3e","-uFDhRTZe2Js","d7KprWqyZBQZ","lCJzsw8T0I-5","s42mgtmSZ8MR","q7nx_eZ8hSlr","-rLcMuDHC-F5","zFd1rse11DpZ","3wvgXwN81RCz","kGL37G6XFcwp","L_vknrk7YSpF","JplTToZvDLiX","xKaqQPs8VQ5u","fazAuLMUr_c0","S6A6-Xwg8GJw","Usr1uRzQeJSb","Yj0ya60zrm8t","Bcjt085lZGUr"],"provenance":[{"file_id":"1q3JTcgbWA46Zih94jwddt39KFLhyntww","timestamp":1663731761602},{"file_id":"1MGqfSbWIJImPFuCcPnfbG9-XJNkYsAoP","timestamp":1663257809933},{"file_id":"1fa1ZrVSmNY6tEau6KIW0M3PxcITiS9cs","timestamp":1663065419767},{"file_id":"1ZQvuAVwA3IjybezQOXnrXMGAnMyZRuPU","timestamp":1585340447636},{"file_id":"1FsBCkREOaDopLF3PIYUuQxLR8wRfjQY1","timestamp":1559844903389},{"file_id":"1f_snPs--PVYgZJwT3GwjxqVALFJ0T2-y","timestamp":1554843110227}]},"kernelspec":{"display_name":"Python 3","name":"python3"},"widgets":{"application/vnd.jupyter.widget-state+json":{"53e4ac2d6d8843ad9392b6348872dd50":{"model_module":"@jupyter-widgets/controls","model_name":"HBoxModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HBoxModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HBoxView","box_style":"","children":["IPY_MODEL_067447d0f712460e9483d3d6dd139531","IPY_MODEL_4ebb876a06814c9bb4b1a7463cef3474","IPY_MODEL_b2257fbad906438cb14d906e987cc983"],"layout":"IPY_MODEL_9c5c063a37004635bc9f494f03f253a1"}},"067447d0f712460e9483d3d6dd139531":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_fc2ded7e00f640b0a3ec67938b8a2d86","placeholder":"​","style":"IPY_MODEL_7269c54decf941f399aba1a47f076dcc","value":"Documentos: 100%"}},"4ebb876a06814c9bb4b1a7463cef3474":{"model_module":"@jupyter-widgets/controls","model_name":"FloatProgressModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"FloatProgressModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ProgressView","bar_style":"success","description":"","description_tooltip":null,"layout":"IPY_MODEL_672ba2e403a9498090c4605cfdcfaeee","max":2596620,"min":0,"orientation":"horizontal","style":"IPY_MODEL_65081bc039f34a53bb9a5e18fd3b6a3a","value":2596620}},"b2257fbad906438cb14d906e987cc983":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_5eb8f49adf334e5bacde8d151990a264","placeholder":"​","style":"IPY_MODEL_bea21670b89c41b685cd70d506ac8c8b","value":" 2596620/2596620 [06:54&lt;00:00, 4531.57 documento/s]"}},"9c5c063a37004635bc9f494f03f253a1":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"fc2ded7e00f640b0a3ec67938b8a2d86":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"7269c54decf941f399aba1a47f076dcc":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"672ba2e403a9498090c4605cfdcfaeee":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"65081bc039f34a53bb9a5e18fd3b6a3a":{"model_module":"@jupyter-widgets/controls","model_name":"ProgressStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ProgressStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","bar_color":null,"description_width":""}},"5eb8f49adf334e5bacde8d151990a264":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"bea21670b89c41b685cd70d506ac8c8b":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}}}}},"nbformat":4,"nbformat_minor":0}