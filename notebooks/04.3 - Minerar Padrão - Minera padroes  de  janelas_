{"cells":[{"cell_type":"markdown","metadata":{"id":"EKOTlwcmxmej"},"source":["# Selecionando sentenças dos originais\n","\n","Realiza a seleção de sentenças que possuem as palavras chaves os arquivos:\n","\n","- `original.zip`\n","- `originalpos.zip`\n","\n","Gera o arquivo:\n","\n","- `original_filtrado.zip`"]},{"cell_type":"markdown","metadata":{"id":"OP33KWAtBMWs"},"source":["# 1 Preparação do ambiente\n","\n","Preparação do ambiente para execução do script."]},{"cell_type":"markdown","metadata":{"id":"PKUr9Vk4BNLC"},"source":["## 1.1 Tempo inicial de processamento"]},{"cell_type":"code","execution_count":1,"metadata":{"executionInfo":{"elapsed":5,"status":"ok","timestamp":1670461723860,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"JXclHCRQBSF2"},"outputs":[],"source":["# Import das bibliotecas.\n","import time\n","import datetime\n","\n","# Marca o tempo de início do processamento\n","inicio_processamento = time.time()"]},{"cell_type":"markdown","metadata":{"id":"GOcN8hK-scnt"},"source":["## 1.2 Funções e classes auxiliares"]},{"cell_type":"markdown","metadata":{"id":"OPRnA-mk5-c4"},"source":["Verifica se existe o diretório cohebert no diretório corrente.   \n"]},{"cell_type":"code","execution_count":2,"metadata":{"executionInfo":{"elapsed":5,"status":"ok","timestamp":1670461723861,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"Fj5TaAH_5-nB"},"outputs":[],"source":["# Import das bibliotecas.\n","import os # Biblioteca para manipular arquivos\n","\n","# ============================  \n","def verificaDiretorioCoheBERT():\n","    \"\"\"\n","      Verifica se existe o diretório cohebert no diretório corrente.    \n","    \"\"\"\n","    \n","    # Verifica se o diretório existe\n","    if not os.path.exists(DIRETORIO_COHEBERT):  \n","        # Cria o diretório\n","        os.makedirs(DIRETORIO_COHEBERT)\n","        logging.info(\"Diretório Cohebert criado: {}\".format(DIRETORIO_COHEBERT))\n","    \n","    return DIRETORIO_COHEBERT"]},{"cell_type":"markdown","metadata":{"id":"yDCOeh2y5jOH"},"source":["Realiza o download e um arquivo"]},{"cell_type":"code","execution_count":3,"metadata":{"executionInfo":{"elapsed":5,"status":"ok","timestamp":1670461723861,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"5B1mvfAU5jZf"},"outputs":[],"source":["# Import das bibliotecas.\n","import requests # Biblioteca de download\n","from tqdm.notebook import tqdm as tqdm_notebook # Biblioteca para barra de progresso\n","import os # Biblioteca para manipular arquivos\n","\n","def downloadArquivo(url_arquivo, nome_arquivo_destino):\n","    \"\"\"    \n","      Realiza o download de um arquivo de uma url em salva em nome_arquivo_destino.\n","    \n","      Parâmetros:\n","        `url_arquivo` - URL do arquivo a ser feito download.      \n","        `nome_arquivo_destino` - Nome do arquivo a ser salvo.      \n","    \"\"\"\n","    \n","    # Verifica se existe o diretório base\n","    DIRETORIO_COHEBERT = verificaDiretorioCoheBERT()\n","    \n","    # Realiza o download de um arquivo em uma url\n","    data = requests.get(url_arquivo, stream=True)\n","    \n","    # Verifica se o arquivo existe\n","    if data.status_code != 200:\n","        logging.info(\"Exceção ao tentar realizar download {}. Response {}.\".format(url_arquivo, data.status_code))\n","        data.raise_for_status()\n","        return\n","\n","    # Recupera o nome do arquivo a ser realizado o download    \n","    nome_arquivo = nome_arquivo_destino.split(\"/\")[-1]  \n","\n","    # Define o nome e caminho do arquivo temporário    \n","    nome_arquivo_temporario = DIRETORIO_COHEBERT + \"/\" + nome_arquivo + \"_part\"\n","    \n","    logging.info(\"Download do arquivo: {}.\".format(nome_arquivo_destino))\n","    \n","    # Baixa o arquivo\n","    with open(nome_arquivo_temporario, \"wb\") as arquivo_binario:        \n","        tamanho_conteudo = data.headers.get(\"Content-Length\")        \n","        total = int(tamanho_conteudo) if tamanho_conteudo is not None else None\n","        # Barra de progresso de download\n","        progresso_bar = tqdm_notebook(unit=\"B\", total=total, unit_scale=True)                \n","        # Atualiza a barra de progresso\n","        for chunk in data.iter_content(chunk_size=1024):        \n","            if chunk:                \n","                progresso_bar.update(len(chunk))\n","                arquivo_binario.write(chunk)\n","    \n","    # Renomeia o arquivo temporário para o arquivo definitivo\n","    os.rename(nome_arquivo_temporario, nome_arquivo_destino)\n","    \n","    # Fecha a barra de progresso.\n","    progresso_bar.close()"]},{"cell_type":"markdown","metadata":{"id":"ksYnRk7zLGp0"},"source":["Remove tags de um documento"]},{"cell_type":"code","execution_count":4,"metadata":{"executionInfo":{"elapsed":5,"status":"ok","timestamp":1670461723861,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"6qwKjGvyLG4v"},"outputs":[],"source":["def remove_tags(documento):\n","    \"\"\"\n","      Remove tags de um documento\n","    \"\"\"\n","    \n","    import re\n","\n","    documento_limpo = re.compile(\"<.*?>\")\n","    return re.sub(documento_limpo, \"\", documento)"]},{"cell_type":"markdown","metadata":{"id":"4pduTsINLeaz"},"source":["Funções auxiliares de arquivos"]},{"cell_type":"code","execution_count":5,"metadata":{"executionInfo":{"elapsed":4,"status":"ok","timestamp":1670461723861,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"jirIzIstLea0"},"outputs":[],"source":["def carregar(nome_arquivo, encoding=\"Windows-1252\"):\n","    \"\"\"\n","      Carrega um arquivo texto e retorna as linhas como um único parágrafo(texto).\n","    \n","      Parâmetros:\n","        `nome_arquivo` - Nome do arquivo a ser carregado.  \n","    \"\"\"\n","\n","    # Abre o arquivo\n","    arquivo = open(nome_arquivo, \"r\", encoding= encoding)\n","    \n","    paragrafo = \"\"\n","    for linha in arquivo:\n","        linha = linha.splitlines()\n","        linha = \" \".join(linha)\n","        # Remove as tags existentes no final das linhas\n","        linha = remove_tags(linha)\n","        if linha != \"\":\n","          paragrafo = paragrafo + linha.strip() + \" \"\n","    \n","    # Fecha o arquivo\n","    arquivo.close()\n","\n","    # Remove os espaços em branco antes e depois do parágrafo\n","    return paragrafo.strip()"]},{"cell_type":"code","execution_count":6,"metadata":{"executionInfo":{"elapsed":8,"status":"ok","timestamp":1670461724176,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"EC9Xppq-_R0w"},"outputs":[],"source":["def carregarLista(nome_arquivo, encoding=\"Windows-1252\"):\n","    \"\"\"\n","      Carrega um arquivo texto e retorna as linhas como uma lista de sentenças(texto).\n","    \n","      Parâmetros:\n","        `nome_arquivo` - Nome do arquivo a ser carregado.   \n","        `encoding` - Codificação dos caracteres do arquivo.\n","    \"\"\"\n","\n","    # Abre o arquivo\n","    arquivo = open(nome_arquivo, \"r\", encoding= encoding)\n","    \n","    sentencas = []\n","    for linha in arquivo:        \n","        linha = linha.splitlines()\n","        linha = \" \".join(linha)\n","        linha = remove_tags(linha)\n","        if linha != \"\":\n","          sentencas.append(linha.strip())\n","    \n","    # Fecha o arquivo\n","    arquivo.close()\n","\n","    return sentencas "]},{"cell_type":"code","execution_count":7,"metadata":{"executionInfo":{"elapsed":7,"status":"ok","timestamp":1670461724176,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"fkVk5LQT_G3f"},"outputs":[],"source":["def salvar(nome_arquivo,texto):                       \n","    \"\"\"\n","      Salva um texto em arquivo.\n","     \n","      Parâmetros:\n","        `nome_arquivo` - Nome do arquivo a ser salvo.\n","        `texto` - Texto a ser salvo.     \n","    \"\"\"\n","\n","    arquivo = open(nome_arquivo, \"w\")\n","    arquivo.write(str(texto))\n","    arquivo.close()"]},{"cell_type":"markdown","metadata":{"id":"603LYIYKBmq5"},"source":["Função auxiliar para formatar o tempo como `hh: mm: ss`"]},{"cell_type":"code","execution_count":8,"metadata":{"executionInfo":{"elapsed":7,"status":"ok","timestamp":1670461724177,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"Guy6B4whsZFR"},"outputs":[],"source":["# Import das bibliotecas.\n","import time\n","import datetime\n","\n","def formataTempo(tempo):\n","    \"\"\"\n","      Pega a tempo em segundos e retorna uma string hh:mm:ss\n","    \"\"\"\n","    # Arredonda para o segundo mais próximo.\n","    tempo_arredondado = int(round((tempo)))\n","    \n","    # Formata como hh:mm:ss\n","    return str(datetime.timedelta(seconds=tempo_arredondado))    "]},{"cell_type":"markdown","metadata":{"id":"zVKAapz7RCxk"},"source":["Classe(ModelArguments) de definição dos parâmetros do modelo"]},{"cell_type":"code","execution_count":9,"metadata":{"executionInfo":{"elapsed":7,"status":"ok","timestamp":1670461724177,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"zgmN6RqDRDZS"},"outputs":[],"source":["# Import das bibliotecas.\n","from dataclasses import dataclass, field\n","from typing import Dict, Optional\n","from typing import List\n","\n","@dataclass\n","class ModeloArgumentosMedida:\n","    max_seq_len: Optional[int] = field(\n","        default=None,\n","        metadata={\"help\": \"max seq len\"},\n","    )    \n","    pretrained_model_name_or_path: str = field(\n","        default=\"neuralmind/bert-base-portuguese-cased\",\n","        metadata={\"help\": \"nome do modelo pré-treinado do BERT.\"},\n","    )\n","    modelo_spacy: str = field(\n","        default=\"pt_core_news_lg\",\n","        metadata={\"help\": \"nome do modelo do spaCy.\"},\n","    )\n","    versao_modelo_spacy: str = field(\n","        default=\"-3.2.0\",\n","        metadata={\"help\": \"versão do nome do modelo no spaCy.\"},\n","    )\n","    sentenciar_documento: bool = field(\n","        default=True,\n","        metadata={\"help\": \"Dividir o documento em sentenças(frases).\"},\n","    )\n","    do_lower_case: bool = field(\n","        default=False,\n","        metadata={\"help\": \"define se o texto do modelo deve ser todo em minúsculo.\"},\n","    )    \n","    output_attentions: bool = field(\n","        default=False,\n","        metadata={\"help\": \"habilita se o modelo retorna os pesos de atenção.\"},\n","    )\n","    output_hidden_states: bool = field(\n","        default=False,\n","        metadata={\"help\": \"habilita gerar as camadas ocultas do modelo.\"},\n","    )\n","    usar_mcl_ajustado : bool = field(\n","        default=False,\n","        metadata={\"help\": \"habilita o carragamento de mcl ajustado.\"},\n","    )"]},{"cell_type":"markdown","metadata":{"id":"rceIwWa7UmFZ"},"source":["Biblioteca de limpeza de tela\n"]},{"cell_type":"code","execution_count":10,"metadata":{"executionInfo":{"elapsed":6,"status":"ok","timestamp":1670461724177,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"PXTEvmuhUmjO"},"outputs":[],"source":["# Import das bibliotecas.\n","from IPython.display import clear_output"]},{"cell_type":"markdown","metadata":{"id":"iAPVtRXQqDim"},"source":["## 1.3 Tratamento de logs"]},{"cell_type":"code","execution_count":11,"metadata":{"executionInfo":{"elapsed":7,"status":"ok","timestamp":1670461724178,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"DcopxbGZqDip"},"outputs":[],"source":["# Import das bibliotecas.\n","import logging # Biblioteca de logging\n","\n","# Formatando a mensagem de logging\n","logging.basicConfig(format=\"%(asctime)s : %(levelname)s : %(message)s\")\n","\n","logger = logging.getLogger()\n","logger.setLevel(logging.INFO)"]},{"cell_type":"markdown","metadata":{"id":"_GjYtXcMnSAe"},"source":["## 1.4 Identificando o ambiente Colab"]},{"cell_type":"code","execution_count":12,"metadata":{"executionInfo":{"elapsed":7,"status":"ok","timestamp":1670461724178,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"YMiH0E3OnRa1"},"outputs":[],"source":["# Import das bibliotecas.\n","import sys # Biblioteca para acessar módulos do sistema\n","\n","# Se estiver executando no Google Colaboratory\n","# Retorna true ou false se estiver no Google Colaboratory\n","IN_COLAB = \"google.colab\" in sys.modules"]},{"cell_type":"markdown","metadata":{"id":"RinFHFesVKis"},"source":["## 1.5 Colaboratory"]},{"cell_type":"markdown","metadata":{"id":"MPngEboiVbfi"},"source":["Usando Colab GPU para Treinamento\n"]},{"cell_type":"markdown","metadata":{"id":"EjWE6WlvVbfj"},"source":["Uma GPU pode ser adicionada acessando o menu e selecionando:\n","\n","`Edit -> Notebook Settings -> Hardware accelerator -> (GPU)`\n","\n","Em seguida, execute a célula a seguir para confirmar que a GPU foi detectada."]},{"cell_type":"code","execution_count":13,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":3856,"status":"ok","timestamp":1670461728028,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"vtaYZmc3Vbfj","outputId":"09e7ab70-adf7-47e9-b8cf-93acd9711c79"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:numexpr.utils:NumExpr defaulting to 2 threads.\n","INFO:root:Dispositivo GPU não encontrado\n"]}],"source":["# Import das bibliotecas.\n","import tensorflow as tf\n","\n","# Recupera o nome do dispositido da GPU.\n","device_name = tf.test.gpu_device_name()\n","\n","# O nome do dispositivo deve ser parecido com o seguinte:\n","if device_name == \"/device:GPU:0\":\n","    logging.info(\"Encontrei GPU em: {}\".format(device_name))\n","else:\n","    logging.info(\"Dispositivo GPU não encontrado\")\n","    #raise SystemError(\"Dispositivo GPU não encontrado\")"]},{"cell_type":"markdown","metadata":{"id":"iYRrUo2XWa8G"},"source":["Nome da GPU\n","\n","Para que a torch use a GPU, precisamos identificar e especificar a GPU como o dispositivo. Posteriormente, em nosso ciclo de treinamento, carregaremos dados no dispositivo.\n","\n","Vale a pena observar qual GPU você recebeu. A GPU Tesla P100 é muito mais rápido que as outras GPUs, abaixo uma lista ordenada:\n","- 1o Tesla P100\n","- 2o Tesla T4\n","- 3o Tesla P4 (Não tem memória para execução 4 x 8, somente 2 x 4)\n","- 4o Tesla K80 (Não tem memória para execução 4 x 8, somente 2 x 4)"]},{"cell_type":"code","execution_count":14,"metadata":{"executionInfo":{"elapsed":5915,"status":"ok","timestamp":1670461733940,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"zrjqDO6nWa8J"},"outputs":[],"source":["# Import das bibliotecas.\n","import torch # Biblioteca para manipular os tensores\n","\n","def getDeviceGPU():\n","    \"\"\"\n","    Retorna um dispositivo de GPU se disponível ou CPU.\n","    \n","    Retorno:\n","    `device` - Um device de GPU ou CPU.       \n","    \"\"\"\n","        \n","    # Se existe GPU disponível.\n","    if torch.cuda.is_available():\n","        \n","        # Diz ao PyTorch para usar GPU.    \n","        device = torch.device(\"cuda\")\n","        \n","        logging.info(\"Existem {} GPU(s) disponíveis.\".format(torch.cuda.device_count()))\n","        logging.info(\"Iremos usar a GPU: {}.\".format(torch.cuda.get_device_name(0)))\n","\n","    # Se não.\n","    else:        \n","        logging.info(\"Sem GPU disponível, usando CPU.\")\n","        device = torch.device(\"cpu\")\n","        \n","    return device"]},{"cell_type":"code","execution_count":15,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":13,"status":"ok","timestamp":1670461733940,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"ChDxmtXsKwjf","outputId":"32e6a778-e45b-4bda-8a42-47445c71981f"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Sem GPU disponível, usando CPU.\n"]}],"source":["device = getDeviceGPU()"]},{"cell_type":"markdown","metadata":{"id":"kkdlEouHftcJ"},"source":["Conecta o modelo ao device"]},{"cell_type":"code","execution_count":16,"metadata":{"executionInfo":{"elapsed":11,"status":"ok","timestamp":1670461733941,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"a-znVDGyfsVx"},"outputs":[],"source":["# Import das bibliotecas.\n","import torch # Biblioteca para manipular os tensores\n","\n","def conectaGPU(model, device):\n","    \"\"\"\n","      Conecta um modelo BERT a GPU.\n","\n","      Parâmetros:\n","        `model` - Um modelo BERT carregado.       \n","        `device` - Um device de GPU.     \n","    \n","      Retorno:\n","        `model` - Um objeto model BERT conectado a GPU.     \n","    \"\"\"\n","    # Associa a GPU ao modelo.\n","    model.to(device)\n","\n","    # Se existe GPU disponível.\n","    if torch.cuda.is_available():    \n","        # Diga ao pytorch para rodar este modelo na GPU.\n","        logging.info(\"Pytorch rodando o modelo na GPU.\")\n","        model.cuda()\n","        \n","    else:\n","        logging.info(\"Pytorch rodando sem GPU.\")\n","\n","    return model"]},{"cell_type":"markdown","metadata":{"id":"fGf59D0yVNx9"},"source":["Memória\n","\n","Memória disponível no ambiente"]},{"cell_type":"code","execution_count":17,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":11,"status":"ok","timestamp":1670461733941,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"1iC5-pSAVh7_","outputId":"7c3e554c-03d5-4ebe-cd55-2ac4f08756cb"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Seu ambiente de execução tem  13.6 gigabytes de RAM disponível\n","\n","INFO:root:Para habilitar um tempo de execução de RAM alta, selecione menu o ambiente de execução> \"Alterar tipo de tempo de execução\"\n","INFO:root:e selecione High-RAM. Então, execute novamente está célula\n"]}],"source":["# Importando as bibliotecas.\n","from psutil import virtual_memory\n","\n","ram_gb = virtual_memory().total / 1e9\n","logging.info(\"Seu ambiente de execução tem {: .1f} gigabytes de RAM disponível\\n\".format(ram_gb))\n","\n","if ram_gb < 20:\n","  logging.info(\"Para habilitar um tempo de execução de RAM alta, selecione menu o ambiente de execução> \\\"Alterar tipo de tempo de execução\\\"\")\n","  logging.info(\"e selecione High-RAM. Então, execute novamente está célula\")\n","else:\n","  logging.info(\"Você está usando um ambiente de execução de memória RAM alta!\")"]},{"cell_type":"markdown","metadata":{"id":"wijMXooQQLcQ"},"source":["## 1.6 Monta uma pasta no google drive para carregar os arquivos de dados."]},{"cell_type":"code","execution_count":18,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":21614,"status":"ok","timestamp":1670461755548,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"ysnDDapMQK8K","outputId":"b76178e9-6ff1-4ed1-c2c6-9a89d391e0aa"},"outputs":[{"output_type":"stream","name":"stdout","text":["Mounted at /content/drive\n"]}],"source":["#@title\n","# import necessário\n","from google.colab import drive\n","\n","# Monta o drive na pasta especificada\n","drive.mount(\"/content/drive\")     "]},{"cell_type":"markdown","metadata":{"id":"Pqa-7WXBAw8q"},"source":["## 1.9 Instalação do BERT da Hugging Face"]},{"cell_type":"markdown","metadata":{"id":"eCdqJCtQN52l"},"source":["Instala a interface pytorch para o BERT by Hugging Face. "]},{"cell_type":"code","execution_count":19,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":10369,"status":"ok","timestamp":1670461765912,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"1RfUN_KolV-f","outputId":"84bb5d96-6fdb-478b-9b03-a2ebf243047a"},"outputs":[{"output_type":"stream","name":"stdout","text":["Looking in indexes: https://pypi.org/simple, https://us-python.pkg.dev/colab-wheels/public/simple/\n","Collecting transformers==4.5.1\n","  Downloading transformers-4.5.1-py3-none-any.whl (2.1 MB)\n","\u001b[K     |████████████████████████████████| 2.1 MB 31.0 MB/s \n","\u001b[?25hRequirement already satisfied: tqdm>=4.27 in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (4.64.1)\n","Requirement already satisfied: packaging in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (21.3)\n","Collecting tokenizers<0.11,>=0.10.1\n","  Downloading tokenizers-0.10.3-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl (3.3 MB)\n","\u001b[K     |████████████████████████████████| 3.3 MB 68.3 MB/s \n","\u001b[?25hRequirement already satisfied: filelock in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (3.8.0)\n","Requirement already satisfied: requests in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (2.23.0)\n","Requirement already satisfied: regex!=2019.12.17 in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (2022.6.2)\n","Collecting sacremoses\n","  Downloading sacremoses-0.0.53.tar.gz (880 kB)\n","\u001b[K     |████████████████████████████████| 880 kB 80.5 MB/s \n","\u001b[?25hRequirement already satisfied: numpy>=1.17 in /usr/local/lib/python3.8/dist-packages (from transformers==4.5.1) (1.21.6)\n","Requirement already satisfied: pyparsing!=3.0.5,>=2.0.2 in /usr/local/lib/python3.8/dist-packages (from packaging->transformers==4.5.1) (3.0.9)\n","Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (2022.9.24)\n","Requirement already satisfied: urllib3!=1.25.0,!=1.25.1,<1.26,>=1.21.1 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (1.24.3)\n","Requirement already satisfied: idna<3,>=2.5 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (2.10)\n","Requirement already satisfied: chardet<4,>=3.0.2 in /usr/local/lib/python3.8/dist-packages (from requests->transformers==4.5.1) (3.0.4)\n","Requirement already satisfied: six in /usr/local/lib/python3.8/dist-packages (from sacremoses->transformers==4.5.1) (1.15.0)\n","Requirement already satisfied: click in /usr/local/lib/python3.8/dist-packages (from sacremoses->transformers==4.5.1) (7.1.2)\n","Requirement already satisfied: joblib in /usr/local/lib/python3.8/dist-packages (from sacremoses->transformers==4.5.1) (1.2.0)\n","Building wheels for collected packages: sacremoses\n","  Building wheel for sacremoses (setup.py) ... \u001b[?25l\u001b[?25hdone\n","  Created wheel for sacremoses: filename=sacremoses-0.0.53-py3-none-any.whl size=895260 sha256=ac01087dcf107a1f7e6995e8fe24666ecf0fc7aa1d9e4806c4e8a52764a9e2f7\n","  Stored in directory: /root/.cache/pip/wheels/82/ab/9b/c15899bf659ba74f623ac776e861cf2eb8608c1825ddec66a4\n","Successfully built sacremoses\n","Installing collected packages: tokenizers, sacremoses, transformers\n","Successfully installed sacremoses-0.0.53 tokenizers-0.10.3 transformers-4.5.1\n"]}],"source":["!pip install -U transformers==4.5.1"]},{"cell_type":"markdown","metadata":{"id":"8bGda5JgMtQe"},"source":["# 2 Parametrização"]},{"cell_type":"markdown","metadata":{"id":"ifrYNTwGwKal"},"source":["## Gerais"]},{"cell_type":"code","execution_count":20,"metadata":{"executionInfo":{"elapsed":15,"status":"ok","timestamp":1670461765913,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"5uiH9pNpwI6g"},"outputs":[],"source":["# Definição dos parâmetros a serem avaliados\n","\n","#Realiza o pooling dos tokens de palavras fora do vocabulário do BERT\n","POOLING_TOKENS = 1 # 1 - Sem pooling / 1 - Com pooling \n","\n","#Estratégia de recuperação dos embeddings: (1 - Embeddings da última camada, \n","#                                           2 - Embeddings da concatenação das 4 últimas camadas)\n","ESTRATEGIA_EMBEDDING = 1\n","\n","\n","# DEVE SER UM NUMERO IMPAR E MAIOR OU IGUAL A 3\n","TAMANHO_JANELA = 3\n","DISTANCIA_DA_PALAVRA_ALVO = (TAMANHO_JANELA-1)/2"]},{"cell_type":"markdown","metadata":{"id":"mhByVujAwNAU"},"source":["## Específicos"]},{"cell_type":"markdown","metadata":{"id":"FhMuEM1o1Aq3"},"source":["Parâmetros do modelo"]},{"cell_type":"code","execution_count":21,"metadata":{"executionInfo":{"elapsed":13,"status":"ok","timestamp":1670461765913,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"oJ15-ylRRRdD"},"outputs":[],"source":["# Definição dos parâmetros do Modelo.\n","model_args = ModeloArgumentosMedida(     \n","    max_seq_len = 512,\n","    #pretrained_model_name_or_path = \"https://neuralmind-ai.s3.us-east-2.amazonaws.com/nlp/bert-large-portuguese-cased/bert-large-portuguese-cased_pytorch_checkpoint.zip\",\n","    #pretrained_model_name_or_path = \"https://neuralmind-ai.s3.us-east-2.amazonaws.com/nlp/bert-base-portuguese-cased/bert-base-portuguese-cased_pytorch_checkpoint.zip\",\n","    pretrained_model_name_or_path = \"neuralmind/bert-large-portuguese-cased\",\n","    #pretrained_model_name_or_path = \"neuralmind/bert-base-portuguese-cased\",    \n","    #pretrained_model_name_or_path = \"bert-base-multilingual-cased\",\n","    #pretrained_model_name_or_path = \"bert-base-multilingual-uncased\",\n","    modelo_spacy = \"pt_core_news_lg\",\n","    #modelo_spacy = \"pt_core_news_md\",\n","    #modelo_spacy = \"pt_core_news_sm\",\n","    versao_modelo_spacy = \"3.2.0\",\n","    sentenciar_documento = True,\n","    do_lower_case = False,   # default True  \n","    output_attentions = False,  # default False\n","    output_hidden_states = True, # default False, se True retorna todas as camadas do modelo para as operações de soma e concatenação\n","    usar_mcl_ajustado = False, # Especifica se deve ser carregado um MCL ajustado ou pré-treinado. Necessário especificar o tipo do modelo em pretrained_model_name_or_path. \n",")"]},{"cell_type":"markdown","metadata":{"id":"BLOqjcIzImVo"},"source":["## Nome do diretório dos arquivos de dados"]},{"cell_type":"code","execution_count":22,"metadata":{"executionInfo":{"elapsed":14,"status":"ok","timestamp":1670461765914,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"xJEiTPnKImVp"},"outputs":[],"source":["# Diretório do cohebert\n","DIRETORIO_COHEBERT = \"MODERNIST\""]},{"cell_type":"markdown","metadata":{"id":"SUxlx7Sx4yxj"},"source":["## Define o caminho para os arquivos de dados"]},{"cell_type":"code","execution_count":23,"metadata":{"executionInfo":{"elapsed":14,"status":"ok","timestamp":1670461765914,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"-gQpxAO74yxj"},"outputs":[],"source":["# Diretório local para os arquivos pré-processados\n","DIRETORIO_LOCAL = \"/content/\" + DIRETORIO_COHEBERT + \"/\"\n","\n","# Diretório no google drive com os arquivos pré-processados\n","DIRETORIO_DRIVE = \"/content/drive/MyDrive/Colab Notebooks/Data/\" + DIRETORIO_COHEBERT + \"/\""]},{"cell_type":"markdown","metadata":{"id":"tDgJTbPOZ8SW"},"source":["## Inicialização diretórios"]},{"cell_type":"markdown","metadata":{"id":"qpSERA9TC4WU"},"source":["Diretório base local"]},{"cell_type":"code","execution_count":24,"metadata":{"executionInfo":{"elapsed":13,"status":"ok","timestamp":1670461765914,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"edg7eW2cDflg"},"outputs":[],"source":["# Importando as bibliotecas.\n","import os\n","\n","def criaDiretorioLocal():\n","\n","  # Cria o diretório para receber os arquivos Originais e Permutados\n","  # Diretório a ser criado\n","  dirbase = DIRETORIO_LOCAL[:-1]\n","\n","  if not os.path.exists(dirbase):  \n","      # Cria o diretório\n","      os.makedirs(dirbase)    \n","      logging.info(\"Diretório criado: {}.\".format(dirbase))\n","  else:    \n","      logging.info(\"Diretório já existe: {}.\".format(dirbase))"]},{"cell_type":"code","execution_count":25,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":14,"status":"ok","timestamp":1670461765915,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"xge0ar9MJoKy","outputId":"9f4852c6-8c2c-40bc-95fe-99c0ad10a550"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Diretório criado: /content/MODERNIST.\n"]}],"source":["criaDiretorioLocal()"]},{"cell_type":"markdown","metadata":{"id":"Y7W-7V3QFbpR"},"source":["\n","# 3 Carrega dados"]},{"cell_type":"markdown","metadata":{"id":"oQUy9Tat2EF_"},"source":["## 3.1 Carregamento dos arquivos de dados originais e permutados"]},{"cell_type":"markdown","metadata":{"id":"bD_tNbBGPrnE"},"source":["### 3.1.1 Especifica os nomes dos arquivos de dados\n","\n"]},{"cell_type":"code","execution_count":26,"metadata":{"executionInfo":{"elapsed":13,"status":"ok","timestamp":1670461765915,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"bNgwJRC2uGJb"},"outputs":[],"source":["\n","# Nome do arquivo\n","# Nome do arquivo original\n","NOME_ARQUIVO_DOCUMENTO_FILTRADO = \"pares_medidas_entre_sentencas_\"+str(TAMANHO_JANELA)+\"_vitimas_algoz.csv\"\n","# NOME_ARQUIVO_DOCUMENTO_FILTRADO = \"pares_medidas_entre_sentencas.csv\"\n","\n","NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO = \"pares_medidas_entre_sentencas_\"+str(TAMANHO_JANELA)+\"_vitimas_algoz.zip\"\n","# NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO = \"pares_medidas_entre_sentencas.zip\""]},{"cell_type":"markdown","metadata":{"id":"I0LsmsBlJeeV"},"source":["### 3.1.2 Cria o diretório local para receber os dados"]},{"cell_type":"code","execution_count":27,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":13,"status":"ok","timestamp":1670461765915,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"gFYIHcIHE985","outputId":"6a7425d2-d241-4761-a787-f312f321e2a3"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Diretório já existe: /content/MODERNIST\n"]}],"source":["# Importando as bibliotecas.\n","import os\n","\n","# Cria o diretório para receber os arquivos Originais e Permutados\n","# Diretório a ser criado\n","dirbase = DIRETORIO_LOCAL[:-1]\n","\n","if not os.path.exists(dirbase):  \n","    # Cria o diretório\n","    os.makedirs(dirbase)    \n","    logging.info(\"Diretório criado: {}\".format(dirbase))\n","else:    \n","    logging.info(\"Diretório já existe: {}\".format(dirbase))"]},{"cell_type":"markdown","metadata":{"id":"D8A9syejCsD2"},"source":["### 3.1.3 Copia os arquivos do Google Drive para o Colaboratory"]},{"cell_type":"code","execution_count":28,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":2148,"status":"ok","timestamp":1670461768053,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"pviuxToMCxQw","outputId":"f3817887-411f-4ebe-de4e-72656b26617e"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Terminei a cópia.\n"]}],"source":["# Se estiver executando no Google Colaboratory\n","if IN_COLAB:\n","\n","  !cp \"$DIRETORIO_DRIVE$NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO\" \"$DIRETORIO_LOCAL\"\n","\n","  logging.info(\"Terminei a cópia.\")"]},{"cell_type":"markdown","metadata":{"id":"rFCvZ6CUmt-9"},"source":["Descompacta os arquivos.\n","\n","Usa o unzip para descompactar:\n","*   `-o` sobrescreve o arquivo se existir\n","*   `-j` Não cria nenhum diretório\n","*   `-q` Desliga as mensagens \n","*   `-d` Diretório de destino\n"]},{"cell_type":"code","execution_count":29,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":15255,"status":"ok","timestamp":1670461783305,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"dbHl3d88mouc","outputId":"37773c4f-0b8c-4d9a-be47-d043b3561b93"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:Terminei a descompactação.\n"]}],"source":["# Se estiver executando no Google Colaboratory\n","if IN_COLAB:\n","  !unzip -o -j -q \"$DIRETORIO_LOCAL$NOME_ARQUIVO_DOCUMENTO_FILTRADO_COMPACTADO\" -d \"$DIRETORIO_LOCAL\"\n","\n","  logging.info(\"Terminei a descompactação.\")"]},{"cell_type":"markdown","metadata":{"id":"qzhYJNWJm1z4"},"source":["### 3.1.4 Carregamento das lista com os dados dos arquivos originais"]},{"cell_type":"code","execution_count":30,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":24717,"status":"ok","timestamp":1670461808013,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"QRHlixdHEDTb","outputId":"2b644906-9b48-4d35-d799-9fedc62e3b70"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:TERMINADO ORIGINAIS: 3385564.\n"]}],"source":["# Import das bibliotecas.\n","import pandas as pd\n","\n","# Abre o arquivo e retorna o DataFrame\n","lista_documentos_originais_filtrados = pd.read_csv(DIRETORIO_LOCAL + NOME_ARQUIVO_DOCUMENTO_FILTRADO, sep=\";\", encoding=\"UTF-8\")\n","\n","\n","logging.info(\"TERMINADO ORIGINAIS: {}.\".format(len(lista_documentos_originais_filtrados)))\n"]},{"cell_type":"code","execution_count":31,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":366},"executionInfo":{"elapsed":17,"status":"ok","timestamp":1670461808013,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"jJ5STBZPLlie","outputId":"9db7c69e-c00a-473d-f35a-40ad5383632b"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         sw1_id                                      sw1_documento  \\\n","1584931  201465  e, se não ousais dizê-lo, se não podeis negá-l...   \n","1029905  201261  – É o que mata o boi e a besta – respondeu o e...   \n","2180933  202606          Com quem? Minha senhora só tem bonecas...   \n","711376   200387  mas sua imaginação depravada muitas vezes se a...   \n","506084   200182          Onde há escravos é força que haja açoite.   \n","\n","        sw1_janela_documento  sw1_idOcorrencia sw1_palavraAlvo sw1_grupo  \\\n","1584931          o escravo ,                32         escravo   escravo   \n","1029905          o escravo .                13         escravo   escravo   \n","2180933     Minha senhora só                 4         senhora    senhor   \n","711376          seu senhor .                30          senhor    senhor   \n","506084         há escravos é                 2        escravos   escravo   \n","\n","                   sw1_obra                 sw1_autor  sw1_ano  sw1_idObra  \\\n","1584931  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","1029905  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","2180933  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","711376   As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","506084   As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","\n","         ... sw2_grupo            sw2_obra                 sw2_autor sw2_ano  \\\n","1584931  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","1029905  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","2180933  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","711376   ...    senhor  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","506084   ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","\n","        sw2_idObra  sw2_movimento sw2_length  cos_mean   euc_mean    man_mean  \n","1584931          2     Romantismo          3  0.779912  12.483109  305.057415  \n","1029905          2     Romantismo          3  0.736552  13.072969  332.725663  \n","2180933          2     Romantismo          3  0.695990  14.428732  352.583122  \n","711376           2     Romantismo          3  0.598490  16.154424  409.285000  \n","506084           2     Romantismo          3  0.722869  13.932831  334.789259  \n","\n","[5 rows x 27 columns]"],"text/html":["\n","  <div id=\"df-a36bd43d-eba7-4f9e-bc39-00fc6b655007\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>sw1_id</th>\n","      <th>sw1_documento</th>\n","      <th>sw1_janela_documento</th>\n","      <th>sw1_idOcorrencia</th>\n","      <th>sw1_palavraAlvo</th>\n","      <th>sw1_grupo</th>\n","      <th>sw1_obra</th>\n","      <th>sw1_autor</th>\n","      <th>sw1_ano</th>\n","      <th>sw1_idObra</th>\n","      <th>...</th>\n","      <th>sw2_grupo</th>\n","      <th>sw2_obra</th>\n","      <th>sw2_autor</th>\n","      <th>sw2_ano</th>\n","      <th>sw2_idObra</th>\n","      <th>sw2_movimento</th>\n","      <th>sw2_length</th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>1584931</th>\n","      <td>201465</td>\n","      <td>e, se não ousais dizê-lo, se não podeis negá-l...</td>\n","      <td>o escravo ,</td>\n","      <td>32</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.779912</td>\n","      <td>12.483109</td>\n","      <td>305.057415</td>\n","    </tr>\n","    <tr>\n","      <th>1029905</th>\n","      <td>201261</td>\n","      <td>– É o que mata o boi e a besta – respondeu o e...</td>\n","      <td>o escravo .</td>\n","      <td>13</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.736552</td>\n","      <td>13.072969</td>\n","      <td>332.725663</td>\n","    </tr>\n","    <tr>\n","      <th>2180933</th>\n","      <td>202606</td>\n","      <td>Com quem? Minha senhora só tem bonecas...</td>\n","      <td>Minha senhora só</td>\n","      <td>4</td>\n","      <td>senhora</td>\n","      <td>senhor</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.695990</td>\n","      <td>14.428732</td>\n","      <td>352.583122</td>\n","    </tr>\n","    <tr>\n","      <th>711376</th>\n","      <td>200387</td>\n","      <td>mas sua imaginação depravada muitas vezes se a...</td>\n","      <td>seu senhor .</td>\n","      <td>30</td>\n","      <td>senhor</td>\n","      <td>senhor</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>senhor</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.598490</td>\n","      <td>16.154424</td>\n","      <td>409.285000</td>\n","    </tr>\n","    <tr>\n","      <th>506084</th>\n","      <td>200182</td>\n","      <td>Onde há escravos é força que haja açoite.</td>\n","      <td>há escravos é</td>\n","      <td>2</td>\n","      <td>escravos</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.722869</td>\n","      <td>13.932831</td>\n","      <td>334.789259</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>5 rows × 27 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-a36bd43d-eba7-4f9e-bc39-00fc6b655007')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-a36bd43d-eba7-4f9e-bc39-00fc6b655007 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-a36bd43d-eba7-4f9e-bc39-00fc6b655007');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":31}],"source":["lista_documentos_originais_filtrados.sample(5)"]},{"cell_type":"code","execution_count":32,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":2046,"status":"ok","timestamp":1670461810055,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"pkXUmrCCKy5X","outputId":"ce183a17-47a2-4a0c-9136-cb0aa3b191b1"},"outputs":[{"output_type":"stream","name":"stderr","text":["INFO:root:TERMINADO CORREÇÃO ORIGINAIS_FILTRADOS: 3385564.\n"]}],"source":["# Import das bibliotecas.\n","import ast # Biblioteca para conversão de string em lista\n","\n","# Verifica se o tipo da coluna não é list e converte\n","lista_documentos_originais_filtrados[\"cos_mean\"] = lista_documentos_originais_filtrados[\"cos_mean\"].apply(lambda x: float(x) )\n","lista_documentos_originais_filtrados[\"euc_mean\"] = lista_documentos_originais_filtrados[\"euc_mean\"].apply(lambda x: float(x) )\n","lista_documentos_originais_filtrados[\"man_mean\"] = lista_documentos_originais_filtrados[\"man_mean\"].apply(lambda x: float(x) )\n","\n","\n","\n","logging.info(\"TERMINADO CORREÇÃO ORIGINAIS_FILTRADOS: {}.\".format(len(lista_documentos_originais_filtrados)))"]},{"cell_type":"markdown","metadata":{"id":"kV4ZjkGDWeLl"},"source":["#### filtra as coisas \n"]},{"cell_type":"code","execution_count":33,"metadata":{"executionInfo":{"elapsed":6,"status":"ok","timestamp":1670461810056,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"TOx5vfZtS4Wm"},"outputs":[],"source":["data = {\n","    0:{\"label\":\"negro\", \"alvo\":[\"negro\",\"negros\",\"negrinho\",\"negrinhos\",\"negra\",\"negras\",\"negrinha\",\"negrinhas\"]},\n","    1:{\"label\":\"crioulo\", \"alvo\": [\"crioulo\",\"crioulos\",\"crioulinho\",\"crioulinhos\",\"crioula\",\"crioulas\",\"crioulinha\",\"crioulinhas\"]},\n","    2:{\"label\":\"mulato\", \"alvo\":[\"mulato\",\"mulatos\",\"mulatinho\",\"mulatinhos\",\"mulata\",\"mulatas\",\"mulatinha\",\"mulatinhas\"]},\n","    3:{\"label\":\"criado\", \"alvo\":[\"criado\",\"criados\",\"criadinho\",\"criadinhos\",\"criada\",\"criadas\",\"criadinha\",\"criadinhas\"]},\n","    4:{\"label\":\"escravo\", \"alvo\":[\"escravo\",\"escravos\",\"escravinho\",\"escravinhos\",\"escrava\",\"escravas\",\"escravinha\",\"escravinhas\"]},\n","    5:{\"label\":\"senhor\", \"alvo\":[\"senhor\",\"senhores\",\"senhora\",\"senhoras\",]},\n","    6:{\"label\":\"branco\", \"alvo\":[\"branco\",\"brancos\",\"branca\",\"brancas\",]},\n","}"]},{"cell_type":"code","execution_count":34,"metadata":{"executionInfo":{"elapsed":5,"status":"ok","timestamp":1670461810056,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"9JGuFuP5MidR"},"outputs":[],"source":["lista_documentos_filtrados = lista_documentos_originais_filtrados "]},{"cell_type":"code","execution_count":35,"metadata":{"executionInfo":{"elapsed":5,"status":"ok","timestamp":1670461810057,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"lbhokWFYvS7L"},"outputs":[],"source":["del lista_documentos_originais_filtrados"]},{"cell_type":"code","execution_count":36,"metadata":{"executionInfo":{"elapsed":6761,"status":"ok","timestamp":1670461816813,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"-biRrLGQ5RTC"},"outputs":[],"source":["lista_documentos_filtrados = lista_documentos_filtrados.drop_duplicates()"]},{"cell_type":"code","execution_count":37,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":7,"status":"ok","timestamp":1670461816814,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"k5pLFDvyNXT7","outputId":"4504e1b8-3b73-4df4-9ad4-34f6d78f07fb"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["2972522"]},"metadata":{},"execution_count":37}],"source":["len(lista_documentos_filtrados)"]},{"cell_type":"code","execution_count":38,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":171},"executionInfo":{"elapsed":6,"status":"ok","timestamp":1670461816815,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"MW31fRoDMhMO","outputId":"c76fdbeb-ed1f-4661-947d-3640c9324f01"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["        sw1_id                sw1_documento sw1_janela_documento  \\\n","461079  204822  – Sim, minha senhora, está.      minha senhora ,   \n","\n","        sw1_idOcorrencia sw1_palavraAlvo sw1_grupo            sw1_obra  \\\n","461079                 4         senhora    senhor  As Vítimas-Algozes   \n","\n","                       sw1_autor  sw1_ano  sw1_idObra  ... sw2_grupo  \\\n","461079  Joaquim Manuel de Macedo     1869           2  ...    senhor   \n","\n","                  sw2_obra                 sw2_autor sw2_ano sw2_idObra  \\\n","461079  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869          2   \n","\n","        sw2_movimento sw2_length  cos_mean   euc_mean    man_mean  \n","461079     Romantismo          3  0.712017  14.391397  362.796096  \n","\n","[1 rows x 27 columns]"],"text/html":["\n","  <div id=\"df-027cbe5a-964a-485f-a124-6fe3d5cd94fc\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>sw1_id</th>\n","      <th>sw1_documento</th>\n","      <th>sw1_janela_documento</th>\n","      <th>sw1_idOcorrencia</th>\n","      <th>sw1_palavraAlvo</th>\n","      <th>sw1_grupo</th>\n","      <th>sw1_obra</th>\n","      <th>sw1_autor</th>\n","      <th>sw1_ano</th>\n","      <th>sw1_idObra</th>\n","      <th>...</th>\n","      <th>sw2_grupo</th>\n","      <th>sw2_obra</th>\n","      <th>sw2_autor</th>\n","      <th>sw2_ano</th>\n","      <th>sw2_idObra</th>\n","      <th>sw2_movimento</th>\n","      <th>sw2_length</th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>461079</th>\n","      <td>204822</td>\n","      <td>– Sim, minha senhora, está.</td>\n","      <td>minha senhora ,</td>\n","      <td>4</td>\n","      <td>senhora</td>\n","      <td>senhor</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>senhor</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.712017</td>\n","      <td>14.391397</td>\n","      <td>362.796096</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>1 rows × 27 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-027cbe5a-964a-485f-a124-6fe3d5cd94fc')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-027cbe5a-964a-485f-a124-6fe3d5cd94fc button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-027cbe5a-964a-485f-a124-6fe3d5cd94fc');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":38}],"source":["lista_documentos_filtrados.sample()"]},{"cell_type":"code","execution_count":39,"metadata":{"executionInfo":{"elapsed":607,"status":"ok","timestamp":1670461817417,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"IZh8-KPAOZzS"},"outputs":[],"source":["lista_documentos_filtrados_describe = lista_documentos_filtrados[[\"cos_mean\",\"euc_mean\",\"man_mean\"]]\n"]},{"cell_type":"code","execution_count":40,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":423},"executionInfo":{"elapsed":10,"status":"ok","timestamp":1670461817418,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"SPSY1Ty0OmZn","outputId":"4da8d59c-6d36-432b-9591-163e149b802b"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         cos_mean   euc_mean    man_mean\n","0        0.698707  13.262442  316.953201\n","1        0.698707  13.262442  316.953201\n","2        0.798461  11.267074  279.881891\n","3        0.798461  11.267074  279.881891\n","4        0.763930  12.291130  289.826745\n","...           ...        ...         ...\n","3385559  0.767108  12.165377  299.475347\n","3385560  0.644734  15.537028  385.080569\n","3385561  0.644734  15.537028  385.080569\n","3385562  0.795148  12.040408  294.494513\n","3385563  0.795148  12.040408  294.494513\n","\n","[2972522 rows x 3 columns]"],"text/html":["\n","  <div id=\"df-4546ff16-6df1-495d-b9c0-7b3877f70335\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>0</th>\n","      <td>0.698707</td>\n","      <td>13.262442</td>\n","      <td>316.953201</td>\n","    </tr>\n","    <tr>\n","      <th>1</th>\n","      <td>0.698707</td>\n","      <td>13.262442</td>\n","      <td>316.953201</td>\n","    </tr>\n","    <tr>\n","      <th>2</th>\n","      <td>0.798461</td>\n","      <td>11.267074</td>\n","      <td>279.881891</td>\n","    </tr>\n","    <tr>\n","      <th>3</th>\n","      <td>0.798461</td>\n","      <td>11.267074</td>\n","      <td>279.881891</td>\n","    </tr>\n","    <tr>\n","      <th>4</th>\n","      <td>0.763930</td>\n","      <td>12.291130</td>\n","      <td>289.826745</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>3385559</th>\n","      <td>0.767108</td>\n","      <td>12.165377</td>\n","      <td>299.475347</td>\n","    </tr>\n","    <tr>\n","      <th>3385560</th>\n","      <td>0.644734</td>\n","      <td>15.537028</td>\n","      <td>385.080569</td>\n","    </tr>\n","    <tr>\n","      <th>3385561</th>\n","      <td>0.644734</td>\n","      <td>15.537028</td>\n","      <td>385.080569</td>\n","    </tr>\n","    <tr>\n","      <th>3385562</th>\n","      <td>0.795148</td>\n","      <td>12.040408</td>\n","      <td>294.494513</td>\n","    </tr>\n","    <tr>\n","      <th>3385563</th>\n","      <td>0.795148</td>\n","      <td>12.040408</td>\n","      <td>294.494513</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>2972522 rows × 3 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-4546ff16-6df1-495d-b9c0-7b3877f70335')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-4546ff16-6df1-495d-b9c0-7b3877f70335 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-4546ff16-6df1-495d-b9c0-7b3877f70335');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":40}],"source":["lista_documentos_filtrados_describe"]},{"cell_type":"code","execution_count":41,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":300},"executionInfo":{"elapsed":9,"status":"ok","timestamp":1670461817418,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"St6S868jKWiA","outputId":"0cf6dc3c-d61d-43fa-9bbd-0d467069aab2"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["          cos_mean     euc_mean     man_mean\n","count 2972522.0000 2972522.0000 2972522.0000\n","mean        0.6859      14.3459     354.1851\n","std         0.0782       1.7994      43.5384\n","min         0.2316       0.0000       0.0000\n","25%         0.6342      13.1743     325.9953\n","50%         0.6893      14.3891     355.1178\n","75%         0.7403      15.5826     383.8223\n","max         1.0000      22.5513     541.8450"],"text/html":["\n","  <div id=\"df-77e7ee27-2904-476d-b11f-caa83a6c4c33\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>count</th>\n","      <td>2972522.0000</td>\n","      <td>2972522.0000</td>\n","      <td>2972522.0000</td>\n","    </tr>\n","    <tr>\n","      <th>mean</th>\n","      <td>0.6859</td>\n","      <td>14.3459</td>\n","      <td>354.1851</td>\n","    </tr>\n","    <tr>\n","      <th>std</th>\n","      <td>0.0782</td>\n","      <td>1.7994</td>\n","      <td>43.5384</td>\n","    </tr>\n","    <tr>\n","      <th>min</th>\n","      <td>0.2316</td>\n","      <td>0.0000</td>\n","      <td>0.0000</td>\n","    </tr>\n","    <tr>\n","      <th>25%</th>\n","      <td>0.6342</td>\n","      <td>13.1743</td>\n","      <td>325.9953</td>\n","    </tr>\n","    <tr>\n","      <th>50%</th>\n","      <td>0.6893</td>\n","      <td>14.3891</td>\n","      <td>355.1178</td>\n","    </tr>\n","    <tr>\n","      <th>75%</th>\n","      <td>0.7403</td>\n","      <td>15.5826</td>\n","      <td>383.8223</td>\n","    </tr>\n","    <tr>\n","      <th>max</th>\n","      <td>1.0000</td>\n","      <td>22.5513</td>\n","      <td>541.8450</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-77e7ee27-2904-476d-b11f-caa83a6c4c33')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-77e7ee27-2904-476d-b11f-caa83a6c4c33 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-77e7ee27-2904-476d-b11f-caa83a6c4c33');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":41}],"source":["pd.set_option('display.float_format', lambda x: '%.4f' % x)\n","lista_documentos_filtrados_describe.describe()\n","# .apply(\"{0:.5f}\".format)"]},{"cell_type":"code","execution_count":42,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":9,"status":"ok","timestamp":1670461817419,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"qiMIRD6z_NpO","outputId":"ee3c8669-3b08-43af-cacf-af1872318364"},"outputs":[{"output_type":"stream","name":"stdout","text":["sw1_id\n","sw1_documento\n","sw1_janela_documento\n","sw1_idOcorrencia\n","sw1_palavraAlvo\n","sw1_grupo\n","sw1_obra\n","sw1_autor\n","sw1_ano\n","sw1_idObra\n","sw1_movimento\n","sw1_length\n","sw2_id\n","sw2_documento\n","sw2_janela_documento\n","sw2_idOcorrencia\n","sw2_palavraAlvo\n","sw2_grupo\n","sw2_obra\n","sw2_autor\n","sw2_ano\n","sw2_idObra\n","sw2_movimento\n","sw2_length\n","cos_mean\n","euc_mean\n","man_mean\n"]}],"source":["column_headers = list(lista_documentos_filtrados.columns.values)\n","for value in column_headers:\n","    print(value)\n"]},{"cell_type":"code","execution_count":43,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":296,"status":"ok","timestamp":1670461817708,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"Ey5X5p5wBife","outputId":"cc8d43f0-63e0-4dbe-c861-23a9a1664a31"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["array(['escravo', 'senhor', 'negro', 'crioulo', 'criado', 'branco'],\n","      dtype=object)"]},"metadata":{},"execution_count":43}],"source":["lista_documentos_filtrados['sw1_grupo'].unique()\n","\n","\n","# duplicateRows = lista_documentos_filtrados[lista_documentos_filtrados.duplicated()]\n","\n","\n","# print(duplicateRows)"]},{"cell_type":"code","execution_count":44,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"executionInfo":{"elapsed":10,"status":"ok","timestamp":1670461817709,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"},"user_tz":180},"id":"hJI28OJp48RJ","outputId":"e33a9701-4c01-4d4d-e9e6-c293e0710917"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["2972522"]},"metadata":{},"execution_count":44}],"source":["len(lista_documentos_filtrados)"]},{"cell_type":"code","execution_count":45,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":49,"referenced_widgets":["92b89205ce4c46ab8ecb20b58b55539e","8fee8906d63a48b8a0adc6a07f59f284","057347fb8d444feb8a34934d334c41c5","3cba060f213f4d668efaf37b1a02617e","cc517890c45749e7ba33f0afc26aea17","415a760e3ac942e488440f7b568a875f","20369fd5d19c48d9979a39cfd67027d0","05fe75e75ff7444fb0d310ebdef9485f","58b150bc53054fb5b73c0378002bde14","4af5bf84c5d54dfa8c04b1ecc9d288df","d8380640062d4781983dee5e2d94bd63"]},"id":"fj5US0qA_JAM","executionInfo":{"status":"ok","timestamp":1670462135651,"user_tz":180,"elapsed":317949,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"1f361bc6-0f1d-4b4a-d3ba-1a2d44a3b7ee"},"outputs":[{"output_type":"display_data","data":{"text/plain":["Documentos:   0%|          | 0/2972522 [00:00<?, ? documento/s]"],"application/vnd.jupyter.widget-view+json":{"version_major":2,"version_minor":0,"model_id":"92b89205ce4c46ab8ecb20b58b55539e"}},"metadata":{}}],"source":["limite = 0.9\n","\n","datas = {\n","    \"negro\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"crioulo\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"mulato\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"criado\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"escravo\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"senhor\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","    \"branco\":{'ids':[],'cos':[],'euc':[],'man':[],'tamanho':[]},\n","}\n","\n","\n","\n","# Barra de progresso dos documentos\n","lista_documentos_originais_bar = tqdm_notebook(lista_documentos_filtrados.iterrows(), desc=f\"Documentos\", unit=f\" documento\", total=len(lista_documentos_filtrados))\n","\n","# Percorre os documentos\n","for i, linha_documento in lista_documentos_originais_bar:  \n","    sw1_id = linha_documento['sw1_id']\n","    sw1_documento = linha_documento['sw1_documento']\n","    sw1_janela_documento = linha_documento['sw1_janela_documento']\n","    sw1_idOcorrencia = linha_documento['sw1_idOcorrencia']\n","    sw1_palavraAlvo = linha_documento['sw1_palavraAlvo']\n","    sw1_grupo = linha_documento['sw1_grupo']\n","    sw1_obra = linha_documento['sw1_obra']\n","    sw1_autor = linha_documento['sw1_autor']\n","    sw1_ano = linha_documento['sw1_ano']\n","    sw1_idObra = linha_documento['sw1_idObra']\n","    sw1_movimento = linha_documento['sw1_movimento']\n","    sw1_length = linha_documento['sw1_length']\n","    sw2_id = linha_documento['sw2_id']\n","    sw2_documento = linha_documento['sw2_documento']\n","    sw2_janela_documento = linha_documento['sw2_janela_documento']\n","    sw2_idOcorrencia = linha_documento['sw2_idOcorrencia']\n","    sw2_palavraAlvo = linha_documento['sw2_palavraAlvo']\n","    sw2_grupo = linha_documento['sw2_grupo']\n","    sw2_obra = linha_documento['sw2_obra']\n","    sw2_autor = linha_documento['sw2_autor']\n","    sw2_ano = linha_documento['sw2_ano']\n","    sw2_idObra = linha_documento['sw2_idObra']\n","    sw2_movimento = linha_documento['sw2_movimento']\n","    sw2_length = linha_documento['sw2_length']\n","    cos_mean = linha_documento['cos_mean']\n","    euc_mean = linha_documento['euc_mean']\n","    man_mean = linha_documento['man_mean']\n","\n","    if cos_mean >= limite:\n","        datas[sw1_grupo]['ids'].append([sw1_id])\n","        datas[sw1_grupo]['cos'].append([cos_mean])\n","        datas[sw1_grupo]['euc'].append([euc_mean])\n","        datas[sw1_grupo]['man'].append([man_mean])\n","        datas[sw1_grupo]['tamanho'].append([sw1_length])\n","\n","    \n","\n","\n","\n"]},{"cell_type":"code","execution_count":46,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"lVJvss9rLbB2","executionInfo":{"status":"ok","timestamp":1670462135652,"user_tz":180,"elapsed":25,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"ca833765-6432-482c-fc36-4182e82dce19"},"outputs":[{"output_type":"stream","name":"stdout","text":["negro 561   0.912925468689628   7.757274781436306   193.92940982113944   3.0\n","crioulo 840   0.9131598802982609   7.595055678144364   191.06932796287583   3.0\n","escravo 780   0.9110647607154665   7.659347106769284   191.35755129077734   3.0\n","senhor 1939   0.9152622281796624   7.679757324214761   192.5278033071081   3.0\n"]}],"source":["import numpy as np\n","\n","if len(datas[\"negro\"]['ids']) != 0:\n","    print(\"negro\", len(datas[\"negro\"]['ids']),\" \",np.median(datas[\"negro\"]['cos']),\" \",np.median(datas[\"negro\"]['euc']),\" \",np.median(datas[\"negro\"]['man']),\" \",np.median(datas[\"negro\"]['tamanho']))\n","\n","if len(datas[\"crioulo\"]['ids']) != 0:\n","    print(\"crioulo\", len(datas[\"crioulo\"]['ids']),\" \",np.median(datas[\"crioulo\"]['cos']),\" \",np.median(datas[\"crioulo\"]['euc']),\" \",np.median(datas[\"crioulo\"]['man']),\" \",np.median(datas[\"crioulo\"]['tamanho']))\n","\n","if len(datas[\"mulato\"]['ids']) != 0:\n","    print(\"mulato\",len(datas[\"mulato\"]['ids']),\" \",np.median(datas[\"mulato\"]['cos']),\" \",np.median(datas[\"mulato\"]['euc']),\" \",np.median(datas[\"mulato\"]['man']),\" \",np.median(datas[\"mulato\"]['tamanho']))\n","\n","if len(datas[\"criado\"]['ids']) != 0:\n","    print(\"criado\", len(datas[\"criado\"]['ids']),\" \",np.median(datas[\"criado\"]['cos']),\" \",np.median(datas[\"criado\"]['euc']),\" \",np.median(datas[\"criado\"]['man']),\" \",np.median(datas[\"criado\"]['tamanho']))\n","\n","if len(datas[\"escravo\"]['ids']) != 0:\n","    print(\"escravo\",len(datas[\"escravo\"]['ids']),\" \",np.median(datas[\"escravo\"]['cos']),\" \",np.median(datas[\"escravo\"]['euc']),\" \",np.median(datas[\"escravo\"]['man']),\" \",np.median(datas[\"escravo\"]['tamanho']))\n","\n","if len(datas[\"senhor\"]['ids']) != 0:\n","    print(\"senhor\",len(datas[\"senhor\"]['ids']),\" \",np.median(datas[\"senhor\"]['cos']),\" \",np.median(datas[\"senhor\"]['euc']),\" \",np.median(datas[\"senhor\"]['man']),\" \",np.median(datas[\"senhor\"]['tamanho']))\n","\n","if len(datas[\"branco\"]['ids']) != 0:\n","    print(\"branco\",len(datas[\"branco\"]['ids']),\" \",np.median(datas[\"branco\"]['cos']),\" \",np.median(datas[\"branco\"]['euc']),\" \",np.median(datas[\"branco\"]['man']),\" \",np.median(datas[\"branco\"]['tamanho']))"]},{"cell_type":"code","execution_count":47,"metadata":{"id":"v6xnM9pHPwVX","executionInfo":{"status":"ok","timestamp":1670462135652,"user_tz":180,"elapsed":22,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}}},"outputs":[],"source":["limitador_1 = limite\n","lista_documentos_filtrados_limite = lista_documentos_filtrados.loc[lista_documentos_filtrados['cos_mean'] >= limitador_1]\n","\n","lista_documentos_filtrados_limite_negro = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['sw1_grupo'] == 'negro']\n","lista_documentos_filtrados_limite_crioulo = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['sw1_grupo'] == 'crioulo']\n","lista_documentos_filtrados_limite_mulato = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['sw1_grupo'] == 'mulato']\n","lista_documentos_filtrados_limite_criado = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['sw1_grupo'] == 'criado']\n","lista_documentos_filtrados_limite_escravo = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['sw1_grupo'] == 'escravo']\n","lista_documentos_filtrados_limite_senhor = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['sw1_grupo'] == 'senhor']\n","lista_documentos_filtrados_limite_branco = lista_documentos_filtrados_limite.loc[lista_documentos_filtrados_limite['sw1_grupo'] == 'branco']\n"]},{"cell_type":"code","execution_count":48,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":641},"id":"N0dY6lnD-I3V","executionInfo":{"status":"ok","timestamp":1670462135652,"user_tz":180,"elapsed":22,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"ebb5f310-e173-4d62-d921-3ddf1d5740d3"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         sw1_id                                      sw1_documento  \\\n","369894   200115  E o negro enfezado e ruim perseguia o crioulin...   \n","369895   201835  A crioula malvada era menos celerada que o neg...   \n","370066   200115  E o negro enfezado e ruim perseguia o crioulin...   \n","370067   202028  E o negro fixou ainda mais incisiva e profunda...   \n","370396   200115  E o negro enfezado e ruim perseguia o crioulin...   \n","...         ...                                                ...   \n","3329304  204267  – A explicação foi mentira indecente e escanda...   \n","3330142  204268  Cândida que começava a ouvir a improvisada his...   \n","3336622  204470  Como um espectro a negra mucama, em camisa, av...   \n","3336638  204470  Como um espectro a negra mucama, em camisa, av...   \n","3356582  204559  – disse Cândida, retirando a mão que a negra b...   \n","\n","        sw1_janela_documento  sw1_idOcorrencia sw1_palavraAlvo sw1_grupo  \\\n","369894      o negro enfezado                 2           negro     negro   \n","369895      o negro africano                 8           negro     negro   \n","370066      o negro enfezado                 2           negro     negro   \n","370067         o negro fixou                 2           negro     negro   \n","370396      o negro enfezado                 2           negro     negro   \n","...                      ...               ...             ...       ...   \n","3329304      a negra devassa                12           negra     negro   \n","3330142            a negra ,                34           negra     negro   \n","3336622       a negra mucama                 4           negra     negro   \n","3336638       a negra mucama                 4           negra     negro   \n","3356582      a negra beijara                 9           negra     negro   \n","\n","                   sw1_obra                 sw1_autor  sw1_ano  sw1_idObra  \\\n","369894   As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","369895   As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","370066   As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","370067   As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","370396   As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","...                     ...                       ...      ...         ...   \n","3329304  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","3330142  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","3336622  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","3336638  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","3356582  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869           2   \n","\n","         ... sw2_grupo            sw2_obra                 sw2_autor sw2_ano  \\\n","369894   ...     negro  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","369895   ...     negro  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","370066   ...     negro  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","370067   ...     negro  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","370396   ...     negro  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","...      ...       ...                 ...                       ...     ...   \n","3329304  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","3330142  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","3336622  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","3336638  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","3356582  ...   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo    1869   \n","\n","        sw2_idObra  sw2_movimento sw2_length cos_mean euc_mean man_mean  \n","369894           2     Romantismo          3   0.9007   8.2824 206.0855  \n","369895           2     Romantismo          3   0.9007   8.2824 206.0855  \n","370066           2     Romantismo          3   0.9033   7.7573 197.2457  \n","370067           2     Romantismo          3   0.9033   7.7573 197.2457  \n","370396           2     Romantismo          3   0.9049   7.9864 201.3050  \n","...            ...            ...        ...      ...      ...      ...  \n","3329304          2     Romantismo          3   0.9009   8.0797 203.4928  \n","3330142          2     Romantismo          3   0.9017   8.3319 203.5359  \n","3336622          2     Romantismo          3   0.9049   8.0214 197.0622  \n","3336638          2     Romantismo          3   0.9147   7.5239 189.2540  \n","3356582          2     Romantismo          3   0.9010   7.9055 201.4501  \n","\n","[561 rows x 27 columns]"],"text/html":["\n","  <div id=\"df-741112a2-4cbf-4455-bb92-3fa69ad2c2f6\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>sw1_id</th>\n","      <th>sw1_documento</th>\n","      <th>sw1_janela_documento</th>\n","      <th>sw1_idOcorrencia</th>\n","      <th>sw1_palavraAlvo</th>\n","      <th>sw1_grupo</th>\n","      <th>sw1_obra</th>\n","      <th>sw1_autor</th>\n","      <th>sw1_ano</th>\n","      <th>sw1_idObra</th>\n","      <th>...</th>\n","      <th>sw2_grupo</th>\n","      <th>sw2_obra</th>\n","      <th>sw2_autor</th>\n","      <th>sw2_ano</th>\n","      <th>sw2_idObra</th>\n","      <th>sw2_movimento</th>\n","      <th>sw2_length</th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>369894</th>\n","      <td>200115</td>\n","      <td>E o negro enfezado e ruim perseguia o crioulin...</td>\n","      <td>o negro enfezado</td>\n","      <td>2</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9007</td>\n","      <td>8.2824</td>\n","      <td>206.0855</td>\n","    </tr>\n","    <tr>\n","      <th>369895</th>\n","      <td>201835</td>\n","      <td>A crioula malvada era menos celerada que o neg...</td>\n","      <td>o negro africano</td>\n","      <td>8</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9007</td>\n","      <td>8.2824</td>\n","      <td>206.0855</td>\n","    </tr>\n","    <tr>\n","      <th>370066</th>\n","      <td>200115</td>\n","      <td>E o negro enfezado e ruim perseguia o crioulin...</td>\n","      <td>o negro enfezado</td>\n","      <td>2</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9033</td>\n","      <td>7.7573</td>\n","      <td>197.2457</td>\n","    </tr>\n","    <tr>\n","      <th>370067</th>\n","      <td>202028</td>\n","      <td>E o negro fixou ainda mais incisiva e profunda...</td>\n","      <td>o negro fixou</td>\n","      <td>2</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9033</td>\n","      <td>7.7573</td>\n","      <td>197.2457</td>\n","    </tr>\n","    <tr>\n","      <th>370396</th>\n","      <td>200115</td>\n","      <td>E o negro enfezado e ruim perseguia o crioulin...</td>\n","      <td>o negro enfezado</td>\n","      <td>2</td>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9049</td>\n","      <td>7.9864</td>\n","      <td>201.3050</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>3329304</th>\n","      <td>204267</td>\n","      <td>– A explicação foi mentira indecente e escanda...</td>\n","      <td>a negra devassa</td>\n","      <td>12</td>\n","      <td>negra</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9009</td>\n","      <td>8.0797</td>\n","      <td>203.4928</td>\n","    </tr>\n","    <tr>\n","      <th>3330142</th>\n","      <td>204268</td>\n","      <td>Cândida que começava a ouvir a improvisada his...</td>\n","      <td>a negra ,</td>\n","      <td>34</td>\n","      <td>negra</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9017</td>\n","      <td>8.3319</td>\n","      <td>203.5359</td>\n","    </tr>\n","    <tr>\n","      <th>3336622</th>\n","      <td>204470</td>\n","      <td>Como um espectro a negra mucama, em camisa, av...</td>\n","      <td>a negra mucama</td>\n","      <td>4</td>\n","      <td>negra</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9049</td>\n","      <td>8.0214</td>\n","      <td>197.0622</td>\n","    </tr>\n","    <tr>\n","      <th>3336638</th>\n","      <td>204470</td>\n","      <td>Como um espectro a negra mucama, em camisa, av...</td>\n","      <td>a negra mucama</td>\n","      <td>4</td>\n","      <td>negra</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9147</td>\n","      <td>7.5239</td>\n","      <td>189.2540</td>\n","    </tr>\n","    <tr>\n","      <th>3356582</th>\n","      <td>204559</td>\n","      <td>– disse Cândida, retirando a mão que a negra b...</td>\n","      <td>a negra beijara</td>\n","      <td>9</td>\n","      <td>negra</td>\n","      <td>negro</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9010</td>\n","      <td>7.9055</td>\n","      <td>201.4501</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>561 rows × 27 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-741112a2-4cbf-4455-bb92-3fa69ad2c2f6')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-741112a2-4cbf-4455-bb92-3fa69ad2c2f6 button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-741112a2-4cbf-4455-bb92-3fa69ad2c2f6');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":48}],"source":["lista_documentos_filtrados_limite_negro"]},{"cell_type":"code","execution_count":49,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"LZPZW8MpZD83","executionInfo":{"status":"ok","timestamp":1670462135653,"user_tz":180,"elapsed":20,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"e8e86bc2-e2e3-4b5d-c64b-c012ba47248b"},"outputs":[{"output_type":"stream","name":"stderr","text":["<ipython-input-49-ed26b66635c8>:9: SettingWithCopyWarning: \n","A value is trying to be set on a copy of a slice from a DataFrame.\n","Try using .loc[row_indexer,col_indexer] = value instead\n","\n","See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n","  lista_documentos_filtrados_limite_negro['contador'] = 0\n"]}],"source":["lista_documentos_filtrados_limite_negro = lista_documentos_filtrados_limite_negro[['sw1_id','sw1_janela_documento']]\n","lista_documentos_filtrados_limite_crioulo = lista_documentos_filtrados_limite_crioulo[['sw1_id','sw1_janela_documento']]\n","lista_documentos_filtrados_limite_mulato = lista_documentos_filtrados_limite_mulato[['sw1_id','sw1_janela_documento']]\n","lista_documentos_filtrados_limite_criado = lista_documentos_filtrados_limite_criado[['sw1_id','sw1_janela_documento']]\n","lista_documentos_filtrados_limite_escravo = lista_documentos_filtrados_limite_escravo[['sw1_id','sw1_janela_documento']]\n","lista_documentos_filtrados_limite_senhor = lista_documentos_filtrados_limite_senhor[['sw1_id','sw1_janela_documento']]\n","lista_documentos_filtrados_limite_branco = lista_documentos_filtrados_limite_branco[['sw1_id','sw1_janela_documento']]\n","\n","lista_documentos_filtrados_limite_negro['contador'] = 0\n","lista_documentos_filtrados_limite_crioulo['contador'] = 0\n","lista_documentos_filtrados_limite_mulato['contador'] = 0\n","lista_documentos_filtrados_limite_criado['contador'] = 0\n","lista_documentos_filtrados_limite_escravo['contador'] = 0\n","lista_documentos_filtrados_limite_senhor['contador'] = 0\n","lista_documentos_filtrados_limite_branco['contador'] = 0"]},{"cell_type":"code","execution_count":50,"metadata":{"id":"9sfP_kkXZbQj","executionInfo":{"status":"ok","timestamp":1670462135654,"user_tz":180,"elapsed":17,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"colab":{"base_uri":"https://localhost:8080/"},"outputId":"2de12eea-dae0-47c0-8382-94037cbbcd35"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["87"]},"metadata":{},"execution_count":50}],"source":["lista_documentos_filtrados_limite_negro_group = lista_documentos_filtrados_limite_negro.groupby(['sw1_id','sw1_janela_documento'],sort=False).count()\n","lista_documentos_filtrados_limite_negro_sorted = lista_documentos_filtrados_limite_negro_group.sort_values('contador', ascending=False)['contador']\n","len(lista_documentos_filtrados_limite_negro_sorted)"]},{"cell_type":"code","execution_count":51,"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"x0xqipUJhls3","executionInfo":{"status":"ok","timestamp":1670462135655,"user_tz":180,"elapsed":16,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"6c434ed1-bfa0-4f3d-99d1-07ce99fa1744"},"outputs":[{"output_type":"stream","name":"stdout","text":["sw1_id  sw1_janela_documento   \n","202129  O negro conservava-se      23\n","202032  O negro arrancou-se        22\n","201852  o negro riu-se             22\n","201313  O negro sacudiu            21\n","202012  O negro riu-se             21\n","202001  O negro riu-se             19\n","201838  O negro encolheu           17\n","201431  o negro fixou              17\n","201605  O negro pôs-se             16\n","202201  O negro olhou              16\n","201026  o negro escravo            15\n","201920  O negro ficou              15\n","201306  o negro ,                  14\n","201328  O negro serenou            14\n","201975  O negro afagou             13\n","201337  O negro ,                  13\n","202211  O negro deixava            13\n","201030  o negro escravo            13\n","201436  o negro ,                  12\n","201286  O negro apertou-lhe        11\n","201812  o negro africano            9\n","202028  o negro fixou               9\n","201389  o negro ,                   9\n","201352  o negro tornou-se           9\n","201835  o negro africano            8\n","204268  a negra ,                   8\n","203544  da negra escrava            7\n","202016  o negro ;                   7\n","200995  o negro d’África            7\n","201911  o negro ,                   7\n","202330  o negro malvado             7\n","201566  o negro africano            7\n","201898  O negro apontou             7\n","201971  o negro africano            7\n","201434  o negro que                 6\n","202148  O negro pareceu             6\n","204470  a negra mucama              6\n","200187  O negro escravo             5\n","202018  O negro fitou               5\n","201646  era negra escrava           4\n","202189  o negro .                   4\n","201103  A negra obedeceu            4\n","202232  velha negra levantou-se     4\n","201178  o negro fixou               4\n","200996  O negro d’África            4\n","201101  o negro ;                   4\n","201881  do negro que                4\n","204267  a negra devassa             3\n","201424  O negro insistia            3\n","200115  o negro enfezado            3\n","Name: contador, dtype: int64\n"]}],"source":["print(lista_documentos_filtrados_limite_negro_sorted[0:50])"]},{"cell_type":"code","execution_count":52,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":641},"id":"2rMJOerUmDmE","executionInfo":{"status":"ok","timestamp":1670462135655,"user_tz":180,"elapsed":13,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"79d2b02e-3607-48fa-c466-d5f52862cf8d"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["         sw1_id                                      sw1_documento  \\\n","77472    200035  porque o escravo, por melhor que seja tratado,...   \n","77473    200817  Ninguém dissimula melhor do que o escravo: sua...   \n","77680    200035  porque o escravo, por melhor que seja tratado,...   \n","77681    201050  E tomai sentido e precauções: o escravo, não n...   \n","81078    200035  porque o escravo, por melhor que seja tratado,...   \n","...         ...                                                ...   \n","3385053  205542  Lucinda, a mucama escrava, vítima porque era e...   \n","3385086  205513  A mucama escrava finalmente, inventando ainda ...   \n","3385087  205518  Era portanto ainda a mucama escrava que fatal ...   \n","3385214  205518  Era portanto ainda a mucama escrava que fatal ...   \n","3385215  205542  Lucinda, a mucama escrava, vítima porque era e...   \n","\n","              sw1_janela_documento  sw1_idOcorrencia sw1_palavraAlvo  \\\n","77472                  o escravo ,                 2         escravo   \n","77473                  o escravo :                 6         escravo   \n","77680                  o escravo ,                 2         escravo   \n","77681                  o escravo ,                 7         escravo   \n","81078                ser escravo ,                20         escravo   \n","...                            ...               ...             ...   \n","3385053           mucama escrava ,                 4         escrava   \n","3385086  mucama escrava finalmente                 2         escrava   \n","3385087         mucama escrava que                 5         escrava   \n","3385214         mucama escrava que                 5         escrava   \n","3385215           mucama escrava ,                 4         escrava   \n","\n","        sw1_grupo            sw1_obra                 sw1_autor  sw1_ano  \\\n","77472     escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","77473     escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","77680     escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","77681     escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","81078     escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","...           ...                 ...                       ...      ...   \n","3385053   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","3385086   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","3385087   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","3385214   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","3385215   escravo  As Vítimas-Algozes  Joaquim Manuel de Macedo     1869   \n","\n","         sw1_idObra  ... sw2_grupo            sw2_obra  \\\n","77472             2  ...   escravo  As Vítimas-Algozes   \n","77473             2  ...   escravo  As Vítimas-Algozes   \n","77680             2  ...   escravo  As Vítimas-Algozes   \n","77681             2  ...   escravo  As Vítimas-Algozes   \n","81078             2  ...   escravo  As Vítimas-Algozes   \n","...             ...  ...       ...                 ...   \n","3385053           2  ...   escravo  As Vítimas-Algozes   \n","3385086           2  ...   escravo  As Vítimas-Algozes   \n","3385087           2  ...   escravo  As Vítimas-Algozes   \n","3385214           2  ...   escravo  As Vítimas-Algozes   \n","3385215           2  ...   escravo  As Vítimas-Algozes   \n","\n","                        sw2_autor sw2_ano sw2_idObra  sw2_movimento  \\\n","77472    Joaquim Manuel de Macedo    1869          2     Romantismo   \n","77473    Joaquim Manuel de Macedo    1869          2     Romantismo   \n","77680    Joaquim Manuel de Macedo    1869          2     Romantismo   \n","77681    Joaquim Manuel de Macedo    1869          2     Romantismo   \n","81078    Joaquim Manuel de Macedo    1869          2     Romantismo   \n","...                           ...     ...        ...            ...   \n","3385053  Joaquim Manuel de Macedo    1869          2     Romantismo   \n","3385086  Joaquim Manuel de Macedo    1869          2     Romantismo   \n","3385087  Joaquim Manuel de Macedo    1869          2     Romantismo   \n","3385214  Joaquim Manuel de Macedo    1869          2     Romantismo   \n","3385215  Joaquim Manuel de Macedo    1869          2     Romantismo   \n","\n","        sw2_length cos_mean euc_mean man_mean  \n","77472            3   0.9088   8.0149 200.2513  \n","77473            3   0.9088   8.0149 200.2513  \n","77680            3   0.9276   7.1257 181.8906  \n","77681            3   0.9276   7.1257 181.8906  \n","81078            3   0.9006   8.1140 200.5694  \n","...            ...      ...      ...      ...  \n","3385053          3   0.9069   7.5721 191.5539  \n","3385086          3   0.9092   7.7564 191.0353  \n","3385087          3   0.9092   7.7564 191.0353  \n","3385214          3   0.9223   7.1149 176.6258  \n","3385215          3   0.9223   7.1149 176.6258  \n","\n","[4120 rows x 27 columns]"],"text/html":["\n","  <div id=\"df-3506b4a1-cf2e-412e-a988-7f217b8b9d9c\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>sw1_id</th>\n","      <th>sw1_documento</th>\n","      <th>sw1_janela_documento</th>\n","      <th>sw1_idOcorrencia</th>\n","      <th>sw1_palavraAlvo</th>\n","      <th>sw1_grupo</th>\n","      <th>sw1_obra</th>\n","      <th>sw1_autor</th>\n","      <th>sw1_ano</th>\n","      <th>sw1_idObra</th>\n","      <th>...</th>\n","      <th>sw2_grupo</th>\n","      <th>sw2_obra</th>\n","      <th>sw2_autor</th>\n","      <th>sw2_ano</th>\n","      <th>sw2_idObra</th>\n","      <th>sw2_movimento</th>\n","      <th>sw2_length</th>\n","      <th>cos_mean</th>\n","      <th>euc_mean</th>\n","      <th>man_mean</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>77472</th>\n","      <td>200035</td>\n","      <td>porque o escravo, por melhor que seja tratado,...</td>\n","      <td>o escravo ,</td>\n","      <td>2</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9088</td>\n","      <td>8.0149</td>\n","      <td>200.2513</td>\n","    </tr>\n","    <tr>\n","      <th>77473</th>\n","      <td>200817</td>\n","      <td>Ninguém dissimula melhor do que o escravo: sua...</td>\n","      <td>o escravo :</td>\n","      <td>6</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9088</td>\n","      <td>8.0149</td>\n","      <td>200.2513</td>\n","    </tr>\n","    <tr>\n","      <th>77680</th>\n","      <td>200035</td>\n","      <td>porque o escravo, por melhor que seja tratado,...</td>\n","      <td>o escravo ,</td>\n","      <td>2</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9276</td>\n","      <td>7.1257</td>\n","      <td>181.8906</td>\n","    </tr>\n","    <tr>\n","      <th>77681</th>\n","      <td>201050</td>\n","      <td>E tomai sentido e precauções: o escravo, não n...</td>\n","      <td>o escravo ,</td>\n","      <td>7</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9276</td>\n","      <td>7.1257</td>\n","      <td>181.8906</td>\n","    </tr>\n","    <tr>\n","      <th>81078</th>\n","      <td>200035</td>\n","      <td>porque o escravo, por melhor que seja tratado,...</td>\n","      <td>ser escravo ,</td>\n","      <td>20</td>\n","      <td>escravo</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9006</td>\n","      <td>8.1140</td>\n","      <td>200.5694</td>\n","    </tr>\n","    <tr>\n","      <th>...</th>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","      <td>...</td>\n","    </tr>\n","    <tr>\n","      <th>3385053</th>\n","      <td>205542</td>\n","      <td>Lucinda, a mucama escrava, vítima porque era e...</td>\n","      <td>mucama escrava ,</td>\n","      <td>4</td>\n","      <td>escrava</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9069</td>\n","      <td>7.5721</td>\n","      <td>191.5539</td>\n","    </tr>\n","    <tr>\n","      <th>3385086</th>\n","      <td>205513</td>\n","      <td>A mucama escrava finalmente, inventando ainda ...</td>\n","      <td>mucama escrava finalmente</td>\n","      <td>2</td>\n","      <td>escrava</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9092</td>\n","      <td>7.7564</td>\n","      <td>191.0353</td>\n","    </tr>\n","    <tr>\n","      <th>3385087</th>\n","      <td>205518</td>\n","      <td>Era portanto ainda a mucama escrava que fatal ...</td>\n","      <td>mucama escrava que</td>\n","      <td>5</td>\n","      <td>escrava</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9092</td>\n","      <td>7.7564</td>\n","      <td>191.0353</td>\n","    </tr>\n","    <tr>\n","      <th>3385214</th>\n","      <td>205518</td>\n","      <td>Era portanto ainda a mucama escrava que fatal ...</td>\n","      <td>mucama escrava que</td>\n","      <td>5</td>\n","      <td>escrava</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9223</td>\n","      <td>7.1149</td>\n","      <td>176.6258</td>\n","    </tr>\n","    <tr>\n","      <th>3385215</th>\n","      <td>205542</td>\n","      <td>Lucinda, a mucama escrava, vítima porque era e...</td>\n","      <td>mucama escrava ,</td>\n","      <td>4</td>\n","      <td>escrava</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>...</td>\n","      <td>escravo</td>\n","      <td>As Vítimas-Algozes</td>\n","      <td>Joaquim Manuel de Macedo</td>\n","      <td>1869</td>\n","      <td>2</td>\n","      <td>Romantismo</td>\n","      <td>3</td>\n","      <td>0.9223</td>\n","      <td>7.1149</td>\n","      <td>176.6258</td>\n","    </tr>\n","  </tbody>\n","</table>\n","<p>4120 rows × 27 columns</p>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-3506b4a1-cf2e-412e-a988-7f217b8b9d9c')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-3506b4a1-cf2e-412e-a988-7f217b8b9d9c button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-3506b4a1-cf2e-412e-a988-7f217b8b9d9c');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":52}],"source":["lista_documentos_filtrados_limite"]},{"cell_type":"code","execution_count":90,"metadata":{"id":"KkYF6MYZlm8d","executionInfo":{"status":"ok","timestamp":1670462835666,"user_tz":180,"elapsed":291,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}}},"outputs":[],"source":["lista_documentos_filtrados_limite_negro_sw1_sw2 = lista_documentos_filtrados.loc[(lista_documentos_filtrados['cos_mean'] >= limitador_1) & (lista_documentos_filtrados['sw1_id'] == 202129) & (lista_documentos_filtrados['sw1_janela_documento'] == 'O negro conservava-se')]"]},{"cell_type":"code","execution_count":91,"metadata":{"id":"ltLMFQoimZ7E","executionInfo":{"status":"ok","timestamp":1670462836464,"user_tz":180,"elapsed":2,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}}},"outputs":[],"source":["lista_documentos_filtrados_limite_negro_sw1_sw2 = lista_documentos_filtrados_limite_negro_sw1_sw2.sort_values('cos_mean', ascending=False)"]},{"cell_type":"code","source":["lista_documentos_filtrados_limite_negro_sw1_sw2['contador'] = 0"],"metadata":{"id":"nz6oj1acUwBA","executionInfo":{"status":"ok","timestamp":1670462836783,"user_tz":180,"elapsed":3,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}}},"execution_count":92,"outputs":[]},{"cell_type":"code","source":["len(lista_documentos_filtrados_limite_negro_sw1_sw2)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"vCANTvZ_UDf4","executionInfo":{"status":"ok","timestamp":1670462837512,"user_tz":180,"elapsed":2,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"2e621cac-180e-496f-d008-15079dc48f30"},"execution_count":93,"outputs":[{"output_type":"execute_result","data":{"text/plain":["23"]},"metadata":{},"execution_count":93}]},{"cell_type":"code","execution_count":94,"metadata":{"colab":{"base_uri":"https://localhost:8080/","height":112},"id":"O-ED-uJgnKgf","executionInfo":{"status":"ok","timestamp":1670462838092,"user_tz":180,"elapsed":4,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"52984977-2f1f-443b-bcb7-3936764a3eb8"},"outputs":[{"output_type":"execute_result","data":{"text/plain":["        sw2_palavraAlvo sw2_grupo  \\\n","2630385           negro     negro   \n","2801788           negro     negro   \n","\n","                                             sw2_documento  \n","2630385  O negro ficou impávido; mas franziu as sobranc...  \n","2801788  O negro deixava indiferentemente à mercê de Es...  "],"text/html":["\n","  <div id=\"df-1a12b0c7-83db-4d0c-bb54-a66bcd9992ab\">\n","    <div class=\"colab-df-container\">\n","      <div>\n","<style scoped>\n","    .dataframe tbody tr th:only-of-type {\n","        vertical-align: middle;\n","    }\n","\n","    .dataframe tbody tr th {\n","        vertical-align: top;\n","    }\n","\n","    .dataframe thead th {\n","        text-align: right;\n","    }\n","</style>\n","<table border=\"1\" class=\"dataframe\">\n","  <thead>\n","    <tr style=\"text-align: right;\">\n","      <th></th>\n","      <th>sw2_palavraAlvo</th>\n","      <th>sw2_grupo</th>\n","      <th>sw2_documento</th>\n","    </tr>\n","  </thead>\n","  <tbody>\n","    <tr>\n","      <th>2630385</th>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>O negro ficou impávido; mas franziu as sobranc...</td>\n","    </tr>\n","    <tr>\n","      <th>2801788</th>\n","      <td>negro</td>\n","      <td>negro</td>\n","      <td>O negro deixava indiferentemente à mercê de Es...</td>\n","    </tr>\n","  </tbody>\n","</table>\n","</div>\n","      <button class=\"colab-df-convert\" onclick=\"convertToInteractive('df-1a12b0c7-83db-4d0c-bb54-a66bcd9992ab')\"\n","              title=\"Convert this dataframe to an interactive table.\"\n","              style=\"display:none;\">\n","        \n","  <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\"viewBox=\"0 0 24 24\"\n","       width=\"24px\">\n","    <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n","    <path d=\"M18.56 5.44l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94zm-11 1L8.5 8.5l.94-2.06 2.06-.94-2.06-.94L8.5 2.5l-.94 2.06-2.06.94zm10 10l.94 2.06.94-2.06 2.06-.94-2.06-.94-.94-2.06-.94 2.06-2.06.94z\"/><path d=\"M17.41 7.96l-1.37-1.37c-.4-.4-.92-.59-1.43-.59-.52 0-1.04.2-1.43.59L10.3 9.45l-7.72 7.72c-.78.78-.78 2.05 0 2.83L4 21.41c.39.39.9.59 1.41.59.51 0 1.02-.2 1.41-.59l7.78-7.78 2.81-2.81c.8-.78.8-2.07 0-2.86zM5.41 20L4 18.59l7.72-7.72 1.47 1.35L5.41 20z\"/>\n","  </svg>\n","      </button>\n","      \n","  <style>\n","    .colab-df-container {\n","      display:flex;\n","      flex-wrap:wrap;\n","      gap: 12px;\n","    }\n","\n","    .colab-df-convert {\n","      background-color: #E8F0FE;\n","      border: none;\n","      border-radius: 50%;\n","      cursor: pointer;\n","      display: none;\n","      fill: #1967D2;\n","      height: 32px;\n","      padding: 0 0 0 0;\n","      width: 32px;\n","    }\n","\n","    .colab-df-convert:hover {\n","      background-color: #E2EBFA;\n","      box-shadow: 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 1px 3px 1px rgba(60, 64, 67, 0.15);\n","      fill: #174EA6;\n","    }\n","\n","    [theme=dark] .colab-df-convert {\n","      background-color: #3B4455;\n","      fill: #D2E3FC;\n","    }\n","\n","    [theme=dark] .colab-df-convert:hover {\n","      background-color: #434B5C;\n","      box-shadow: 0px 1px 3px 1px rgba(0, 0, 0, 0.15);\n","      filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.3));\n","      fill: #FFFFFF;\n","    }\n","  </style>\n","\n","      <script>\n","        const buttonEl =\n","          document.querySelector('#df-1a12b0c7-83db-4d0c-bb54-a66bcd9992ab button.colab-df-convert');\n","        buttonEl.style.display =\n","          google.colab.kernel.accessAllowed ? 'block' : 'none';\n","\n","        async function convertToInteractive(key) {\n","          const element = document.querySelector('#df-1a12b0c7-83db-4d0c-bb54-a66bcd9992ab');\n","          const dataTable =\n","            await google.colab.kernel.invokeFunction('convertToInteractive',\n","                                                     [key], {});\n","          if (!dataTable) return;\n","\n","          const docLinkHtml = 'Like what you see? Visit the ' +\n","            '<a target=\"_blank\" href=https://colab.research.google.com/notebooks/data_table.ipynb>data table notebook</a>'\n","            + ' to learn more about interactive tables.';\n","          element.innerHTML = '';\n","          dataTable['output_type'] = 'display_data';\n","          await google.colab.output.renderOutput(dataTable, element);\n","          const docLink = document.createElement('div');\n","          docLink.innerHTML = docLinkHtml;\n","          element.appendChild(docLink);\n","        }\n","      </script>\n","    </div>\n","  </div>\n","  "]},"metadata":{},"execution_count":94}],"source":["lista_documentos_filtrados_limite_negro_sw1_sw2.head(2)[['sw2_palavraAlvo','sw2_grupo','sw2_documento']]"]},{"cell_type":"code","source":["lista_documentos_filtrados_limite_negro_group_sw2 = lista_documentos_filtrados_limite_negro_sw1_sw2.groupby(['sw2_janela_documento','sw2_documento'],sort=False).count()\n","lista_documentos_filtrados_limite_negro_sorted_sw2 = lista_documentos_filtrados_limite_negro_group_sw2.sort_values('contador', ascending=False)['contador']\n","len(lista_documentos_filtrados_limite_negro_sorted_sw2)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"SNH8XSC8UgRX","executionInfo":{"status":"ok","timestamp":1670462885461,"user_tz":180,"elapsed":295,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"957a5506-aadc-40af-82c3-00d728956c62"},"execution_count":104,"outputs":[{"output_type":"execute_result","data":{"text/plain":["23"]},"metadata":{},"execution_count":104}]},{"cell_type":"code","source":["lista_documentos_filtrados_limite_negro_group_sw2 = lista_documentos_filtrados_limite_negro_sorted_sw2.groupby(['sw2_janela_documento','sw2_documento'],sort=False).count()"],"metadata":{"id":"iCOV1-O9VC6S","executionInfo":{"status":"ok","timestamp":1670462886760,"user_tz":180,"elapsed":2,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}}},"execution_count":105,"outputs":[]},{"cell_type":"code","source":["print(lista_documentos_filtrados_limite_negro_group_sw2)"],"metadata":{"colab":{"base_uri":"https://localhost:8080/"},"id":"yMT282w3VF6h","executionInfo":{"status":"ok","timestamp":1670462887781,"user_tz":180,"elapsed":3,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"b2515a62-9e83-454f-c3e1-330ff5372241"},"execution_count":106,"outputs":[{"output_type":"stream","name":"stdout","text":["sw2_janela_documento  sw2_documento                                                                                                                                                                                                                                                                        \n","O negro ficou         O negro ficou impávido; mas franziu as sobrancelhas.                                                                                                                                                                                                                                     1\n","O negro olhou         O negro olhou suspeitoso, mas soberbo para a crioula, e viu a lascívia abrasando-lhe o rosto.                                                                                                                                                                                            1\n","O negro apertou-lhe   O negro apertou-lhe a mão e sentou-se à porta da senzala: a crioula imitou-o sentando-se a seu lado.                                                                                                                                                                                     1\n","o negro ,             Todavia Esméria estava convencida de que era, como acabava de dizer o negro, muito mais bonita e elegante do que sua senhora.                                                                                                                                                            1\n","O negro insistia      O negro insistia ainda no conselho ou ordem que dera a Esméria, a qual continuava a fingir-se hesitante.                                                                                                                                                                                 1\n","o negro fixou         mas o negro fixou os olhos na ninhada de pintainhos, como se os quisesse absorver nas órbitas.                                                                                                                                                                                           1\n","o negro ,             – Dantes era melhor – disse o negro, sossegado.                                                                                                                                                                                                                                          1\n","O escravo preferia    O escravo preferia ver talhar-se uma mortalha.                                                                                                                                                                                                                                           1\n","o negro que           Esméria considerava, contemplava ansiosa o negro que, imóvel e de olhos fitos, mirava a ninhada infeliz.                                                                                                                                                                                 1\n","O escravo não         O escravo não precisava ser seduzido para encarregar-se da comissão: não tinha em estima o recato de sua senhora-moça; não quis, porém, receber a carta antes de entender-se com Lucinda.                                                                                                1\n","o negro ;             Teresa lembrou-se da impressão repulsiva que experimentara vendo o negro;                                                                                                                                                                                                                1\n","O negro arrancou-se   O negro arrancou-se dos braços da crioula, e fitando-a de novo, com olhar imponente de sua vontade, absoluto, imperioso disse ainda, dando à voz tom ameaçador: –                                                                                                                        1\n","O negro deixava       O negro deixava indiferentemente à mercê de Esméria a vida do senhor, a quem não segurava, nem empurrava.                                                                                                                                                                                1\n","O negro riu-se        O negro riu-se outra vez e disse:                                                                                                                                                                                                                                                        1\n","O negro sacudiu       O negro sacudiu com a cabeça, e tornou com voz comprimida e alterada:                                                                                                                                                                                                                    1\n","O negro afagou        O negro afagou a crioula como costumava, insinuando-se possuído de paixão cada vez mais violenta.                                                                                                                                                                                        1\n","o negro riu-se        Daí a pouco o negro riu-se, olhando para o ventre da crioula.                                                                                                                                                                                                                            1\n","O negro ria-se        O negro ria-se de modo a causar pavor;                                                                                                                                                                                                                                                   1\n","o negro tornou-se     Entretanto e por isso mesmo que o segredo desaparecera, o negro tornou-se mais exigente e aos domingos e dias santificados reclamava com renitência a companhia de Esméria, que raramente podia condescender nesse ponto, presa como se achava ao serviço interno da casa da família.    1\n","O negro encolheu      O negro encolheu os ombros.                                                                                                                                                                                                                                                              1\n","O negro riu-se        O negro riu-se;                                                                                                                                                                                                                                                                          1\n","O negro pôs-se        O negro pôs-se a rir com o seu medonho riso: ele sabia que a crioula não era menos devassa que dantes.                                                                                                                                                                                   1\n","O negro pareceu       O negro pareceu indignado.                                                                                                                                                                                                                                                               1\n","Name: contador, dtype: int64\n"]}]},{"cell_type":"code","source":["len(lista_documentos_filtrados_limite)"],"metadata":{"id":"CIrBe2G6xOmU","executionInfo":{"status":"ok","timestamp":1670462136211,"user_tz":180,"elapsed":567,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"outputId":"e2613da0-e4ef-43d2-902c-91fdde5645ae","colab":{"base_uri":"https://localhost:8080/"}},"execution_count":56,"outputs":[{"output_type":"execute_result","data":{"text/plain":["4120"]},"metadata":{},"execution_count":56}]},{"cell_type":"markdown","metadata":{"id":"Yj0ya60zrm8t"},"source":["# 4 Finalização"]},{"cell_type":"markdown","metadata":{"id":"Bcjt085lZGUr"},"source":["## 4.1 Tempo final de processamento\n","\n"]},{"cell_type":"code","execution_count":57,"metadata":{"id":"H50_GKJwpDha","executionInfo":{"status":"ok","timestamp":1670462136212,"user_tz":180,"elapsed":7,"user":{"displayName":"Leandro Dias","userId":"15287680885186282361"}},"colab":{"base_uri":"https://localhost:8080/"},"outputId":"d3ff827f-0fe9-4958-ffa1-7768210026c5"},"outputs":[{"output_type":"stream","name":"stdout","text":["\n","  Tempo processamento:  0:06:52 (h:mm:ss)\n"]}],"source":["# Pega o tempo atual menos o tempo do início do processamento.\n","final_processamento = time.time()\n","tempo_total_processamento = formataTempo(final_processamento - inicio_processamento)\n","\n","print(\"\")\n","print(\"  Tempo processamento:  {:} (h:mm:ss)\".format(tempo_total_processamento))"]}],"metadata":{"colab":{"collapsed_sections":["EKOTlwcmxmej","PKUr9Vk4BNLC","GOcN8hK-scnt","iAPVtRXQqDim","_GjYtXcMnSAe","Pqa-7WXBAw8q","SUxlx7Sx4yxj","L7G3-MOsQ1N_","AEzytjZi5Iw2","onM1ZApom-_W","6ZVwbmn3Nx2t","Jxe-mh-l6sJY","m4KV_jI-Nx2w","bGaf7bkpAEiX","ZB6bR42PA28c","B4Soqt3fp3Lu","ENvsIER06sJX","b01WgMSSKY_u","TouR4GjNJZD6","_xaeX0oTVQ5t","MBGTMy8Ic7GK","uiuxdXe9t1BX","rHt4e5pAcEMd","V74WUpHqcfoI","eaneOhAKcO-3","6tKcaIfReqdy","e8n7Z5s-QZF8","-pZZrUKRhR3e","-uFDhRTZe2Js","d7KprWqyZBQZ","lCJzsw8T0I-5","s42mgtmSZ8MR","q7nx_eZ8hSlr","-rLcMuDHC-F5","zFd1rse11DpZ","3wvgXwN81RCz","kGL37G6XFcwp","L_vknrk7YSpF","JplTToZvDLiX","xKaqQPs8VQ5u","fazAuLMUr_c0","S6A6-Xwg8GJw","Usr1uRzQeJSb","Yj0ya60zrm8t","Bcjt085lZGUr"],"provenance":[{"file_id":"1q3JTcgbWA46Zih94jwddt39KFLhyntww","timestamp":1663731761602},{"file_id":"1MGqfSbWIJImPFuCcPnfbG9-XJNkYsAoP","timestamp":1663257809933},{"file_id":"1fa1ZrVSmNY6tEau6KIW0M3PxcITiS9cs","timestamp":1663065419767},{"file_id":"1ZQvuAVwA3IjybezQOXnrXMGAnMyZRuPU","timestamp":1585340447636},{"file_id":"1FsBCkREOaDopLF3PIYUuQxLR8wRfjQY1","timestamp":1559844903389},{"file_id":"1f_snPs--PVYgZJwT3GwjxqVALFJ0T2-y","timestamp":1554843110227}]},"kernelspec":{"display_name":"Python 3","name":"python3"},"widgets":{"application/vnd.jupyter.widget-state+json":{"92b89205ce4c46ab8ecb20b58b55539e":{"model_module":"@jupyter-widgets/controls","model_name":"HBoxModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HBoxModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HBoxView","box_style":"","children":["IPY_MODEL_8fee8906d63a48b8a0adc6a07f59f284","IPY_MODEL_057347fb8d444feb8a34934d334c41c5","IPY_MODEL_3cba060f213f4d668efaf37b1a02617e"],"layout":"IPY_MODEL_cc517890c45749e7ba33f0afc26aea17"}},"8fee8906d63a48b8a0adc6a07f59f284":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_415a760e3ac942e488440f7b568a875f","placeholder":"​","style":"IPY_MODEL_20369fd5d19c48d9979a39cfd67027d0","value":"Documentos: 100%"}},"057347fb8d444feb8a34934d334c41c5":{"model_module":"@jupyter-widgets/controls","model_name":"FloatProgressModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"FloatProgressModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"ProgressView","bar_style":"success","description":"","description_tooltip":null,"layout":"IPY_MODEL_05fe75e75ff7444fb0d310ebdef9485f","max":2972522,"min":0,"orientation":"horizontal","style":"IPY_MODEL_58b150bc53054fb5b73c0378002bde14","value":2972522}},"3cba060f213f4d668efaf37b1a02617e":{"model_module":"@jupyter-widgets/controls","model_name":"HTMLModel","model_module_version":"1.5.0","state":{"_dom_classes":[],"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"HTMLModel","_view_count":null,"_view_module":"@jupyter-widgets/controls","_view_module_version":"1.5.0","_view_name":"HTMLView","description":"","description_tooltip":null,"layout":"IPY_MODEL_4af5bf84c5d54dfa8c04b1ecc9d288df","placeholder":"​","style":"IPY_MODEL_d8380640062d4781983dee5e2d94bd63","value":" 2972522/2972522 [05:18&lt;00:00, 9859.94 documento/s]"}},"cc517890c45749e7ba33f0afc26aea17":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"415a760e3ac942e488440f7b568a875f":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"20369fd5d19c48d9979a39cfd67027d0":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}},"05fe75e75ff7444fb0d310ebdef9485f":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"58b150bc53054fb5b73c0378002bde14":{"model_module":"@jupyter-widgets/controls","model_name":"ProgressStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"ProgressStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","bar_color":null,"description_width":""}},"4af5bf84c5d54dfa8c04b1ecc9d288df":{"model_module":"@jupyter-widgets/base","model_name":"LayoutModel","model_module_version":"1.2.0","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"1.2.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"overflow_x":null,"overflow_y":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"d8380640062d4781983dee5e2d94bd63":{"model_module":"@jupyter-widgets/controls","model_name":"DescriptionStyleModel","model_module_version":"1.5.0","state":{"_model_module":"@jupyter-widgets/controls","_model_module_version":"1.5.0","_model_name":"DescriptionStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"1.2.0","_view_name":"StyleView","description_width":""}}}}},"nbformat":4,"nbformat_minor":0}